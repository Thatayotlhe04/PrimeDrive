<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimeDrive Botswana — Buy, Rent & Sell Trusted Cars</title>
    <meta name="description" content="Botswana's trusted car marketplace. Buy, rent, and sell quality pre-owned vehicles in Gaborone. Fast deals, avoid scams, authentic.">
    <meta name="keywords" content="used cars Botswana, buy car Gaborone, rent car Botswana, sell car Botswana, PrimeDrive, pre-owned vehicles, car dealership Gaborone, car rental Botswana">
    <meta name="author" content="PrimeDrive Botswana">
    <meta property="og:title" content="PrimeDrive Botswana — Buy, Rent & Sell Trusted Cars">
    <meta property="og:description" content="Botswana's trusted car marketplace. Quality pre-owned vehicles in Gaborone.">
    <meta property="og:type" content="website">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://primedrivebotswana.com">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        /* ========================================
           DESIGN SYSTEM — CSS VARIABLES
           ======================================== */
        :root {
            /* Color Palette — Light Mode (default) */
            --bg-primary: #ffffff;
            --bg-secondary: #f7f8fa;
            --bg-tertiary: #f0f1f4;
            --bg-card: #ffffff;
            --bg-elevated: #ffffff;
            --bg-input: #f7f8fa;
            --bg-overlay: rgba(0, 0, 0, 0.5);

            --text-primary: #0f1117;
            --text-secondary: #5a5d6b;
            --text-tertiary: #8b8d97;
            --text-inverse: #ffffff;

            --border-default: #e4e5ea;
            --border-light: #edeef2;
            --border-focus: #3b5bff;

            --accent: #3b5bff;
            --accent-hover: #2d49db;
            --accent-light: #eef1ff;
            --accent-subtle: rgba(59, 91, 255, 0.08);

            --success: #22c55e;
            --success-bg: #f0fdf4;
            --whatsapp: #25d366;
            --whatsapp-hover: #20bd5a;

            --shadow-xs: 0 1px 2px rgba(0,0,0,0.04);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.06);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.08);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.10);
            --shadow-card: 0 1px 3px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.04);
            --shadow-card-hover: 0 4px 20px rgba(0,0,0,0.10);

            --radius-xs: 6px;
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-full: 9999px;

            --font-display: 'Outfit', sans-serif;
            --font-body: 'Plus Jakarta Sans', sans-serif;

            --transition-fast: 0.15s ease;
            --transition: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);

            --nav-height: 72px;
            --container-max: 1280px;
            --container-narrow: 720px;
        }

        /* Dark Mode */
        [data-theme="dark"] {
            --bg-primary: #0f1117;
            --bg-secondary: #161821;
            --bg-tertiary: #1c1e2a;
            --bg-card: #1a1c28;
            --bg-elevated: #1e2030;
            --bg-input: #1a1c28;
            --bg-overlay: rgba(0, 0, 0, 0.7);

            --text-primary: #f0f1f4;
            --text-secondary: #9a9caa;
            --text-tertiary: #6b6d7b;
            --text-inverse: #0f1117;

            --border-default: #2a2c3a;
            --border-light: #222436;
            --border-focus: #5b7bff;

            --accent: #5b7bff;
            --accent-hover: #7b95ff;
            --accent-light: rgba(91, 123, 255, 0.12);
            --accent-subtle: rgba(91, 123, 255, 0.06);

            --shadow-xs: 0 1px 2px rgba(0,0,0,0.2);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.25);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.3);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.35);
            --shadow-card: 0 1px 3px rgba(0,0,0,0.2), 0 4px 12px rgba(0,0,0,0.15);
            --shadow-card-hover: 0 4px 24px rgba(0,0,0,0.35);
        }

        /* ========================================
           RESET & BASE
           ======================================== */
        *, *::before, *::after {
            margin: 0; padding: 0; box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
            scroll-padding-top: calc(var(--nav-height) + 20px);
        }
        body {
            font-family: var(--font-body);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            transition: background var(--transition), color var(--transition);
        }
        a { color: inherit; text-decoration: none; }
        img { max-width: 100%; display: block; }
        button, input, select, textarea {
            font-family: var(--font-body);
            border: none;
            outline: none;
            background: none;
            color: inherit;
        }
        ::selection {
            background: var(--accent);
            color: white;
        }

        /* ========================================
           LAYOUT
           ======================================== */
        .container {
            max-width: var(--container-max);
            margin: 0 auto;
            padding: 0 24px;
        }
        .container--narrow {
            max-width: var(--container-narrow);
        }

        /* ========================================
           TYPOGRAPHY
           ======================================== */
        .label {
            font-family: var(--font-body);
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .label i { font-size: 0.85rem; }
        .heading-xl {
            font-family: var(--font-display);
            font-size: clamp(2.5rem, 5.5vw, 4rem);
            font-weight: 800;
            line-height: 1.08;
            letter-spacing: -0.03em;
        }
        .heading-lg {
            font-family: var(--font-display);
            font-size: clamp(1.75rem, 3.5vw, 2.5rem);
            font-weight: 700;
            line-height: 1.15;
            letter-spacing: -0.02em;
        }
        .heading-md {
            font-family: var(--font-display);
            font-size: 1.25rem;
            font-weight: 700;
            letter-spacing: -0.01em;
        }
        .body-lg {
            font-size: 1.1rem;
            line-height: 1.7;
            color: var(--text-secondary);
        }
        .body-sm {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        .body-xs {
            font-size: 0.78rem;
            color: var(--text-tertiary);
        }

        /* ========================================
           BUTTONS
           ======================================== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-family: var(--font-body);
            font-weight: 600;
            font-size: 0.9rem;
            padding: 12px 28px;
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: all var(--transition);
            white-space: nowrap;
            line-height: 1.4;
        }
        .btn i { font-size: 1rem; }
        .btn--primary {
            background: var(--accent);
            color: white;
        }
        .btn--primary:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(59,91,255,0.25);
        }
        .btn--secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-default);
        }
        .btn--secondary:hover {
            background: var(--bg-tertiary);
            border-color: var(--text-tertiary);
            transform: translateY(-1px);
        }
        .btn--outline {
            background: transparent;
            color: var(--text-primary);
            border: 1.5px solid var(--border-default);
        }
        .btn--outline:hover {
            border-color: var(--accent);
            color: var(--accent);
            transform: translateY(-1px);
        }
        .btn--whatsapp {
            background: var(--whatsapp);
            color: white;
        }
        .btn--whatsapp:hover {
            background: var(--whatsapp-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(37,211,102,0.3);
        }
        .btn--ghost {
            background: transparent;
            color: var(--text-secondary);
            padding: 8px 16px;
        }
        .btn--ghost:hover { color: var(--accent); }
        .btn--sm { padding: 9px 20px; font-size: 0.82rem; }
        .btn--lg { padding: 16px 36px; font-size: 1rem; }
        .btn--full { width: 100%; }
        .btn--icon-only {
            width: 44px; height: 44px;
            padding: 0;
            border-radius: var(--radius-md);
        }

        /* ========================================
           NAVIGATION
           ======================================== */
        .nav {
            position: fixed;
            top: 0; left: 0; right: 0;
            z-index: 1000;
            height: var(--nav-height);
            display: flex;
            align-items: center;
            background: rgba(255,255,255,0.82);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid transparent;
            transition: all var(--transition);
        }
        [data-theme="dark"] .nav {
            background: rgba(15,17,23,0.82);
        }
        .nav.scrolled {
            border-bottom-color: var(--border-light);
            box-shadow: var(--shadow-xs);
        }
        .nav__inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }
        .nav__logo {
            font-family: var(--font-display);
            font-size: 1.35rem;
            font-weight: 800;
            letter-spacing: -0.03em;
            display: flex;
            align-items: center;
            gap: 3px;
            cursor: pointer;
        }
        .nav__logo-dot {
            display: inline-block;
            width: 7px;
            height: 7px;
            background: var(--accent);
            border-radius: 50%;
            margin-left: 1px;
            margin-bottom: -2px;
        }
        .nav__links {
            display: flex;
            align-items: center;
            gap: 4px;
            list-style: none;
        }
        .nav__link {
            padding: 8px 16px;
            font-size: 0.88rem;
            font-weight: 500;
            color: var(--text-secondary);
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
            cursor: pointer;
        }
        .nav__link:hover {
            color: var(--text-primary);
            background: var(--bg-secondary);
        }
        .nav__link.active {
            color: var(--accent);
            background: var(--accent-subtle);
            font-weight: 600;
        }
        .nav__actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .nav__theme-toggle {
            width: 40px; height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            cursor: pointer;
            color: var(--text-secondary);
            transition: all var(--transition-fast);
            font-size: 1.1rem;
        }
        .nav__theme-toggle:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        /* Hamburger */
        .nav__hamburger {
            display: none;
            width: 40px; height: 40px;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: background var(--transition-fast);
        }
        .nav__hamburger:hover { background: var(--bg-secondary); }
        .nav__hamburger-icon {
            width: 20px;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        .nav__hamburger-icon span {
            height: 2px;
            background: var(--text-primary);
            border-radius: 2px;
            transition: all var(--transition);
        }
        .nav__hamburger.active .nav__hamburger-icon span:nth-child(1) {
            transform: rotate(45deg) translate(4px, 4px);
        }
        .nav__hamburger.active .nav__hamburger-icon span:nth-child(2) { opacity: 0; }
        .nav__hamburger.active .nav__hamburger-icon span:nth-child(3) {
            transform: rotate(-45deg) translate(4px, -4px);
        }

        /* Mobile Nav */
        .mobile-nav {
            position: fixed;
            top: var(--nav-height);
            left: 0; right: 0; bottom: 0;
            background: var(--bg-primary);
            z-index: 999;
            display: flex;
            flex-direction: column;
            padding: 24px;
            gap: 4px;
            transform: translateX(100%);
            transition: transform var(--transition-slow);
        }
        .mobile-nav.active { transform: translateX(0); }
        .mobile-nav__link {
            font-size: 1.05rem;
            font-weight: 500;
            padding: 16px;
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            transition: all var(--transition-fast);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .mobile-nav__link:hover, .mobile-nav__link.active {
            background: var(--accent-subtle);
            color: var(--accent);
        }
        .mobile-nav__link i { font-size: 1.15rem; width: 24px; text-align: center; }
        .mobile-nav__divider {
            height: 1px;
            background: var(--border-light);
            margin: 12px 0;
        }

        /* ========================================
           PAGE SYSTEM
           ======================================== */
        .page { display: none; }
        .page.active { display: block; animation: pageIn 0.35s ease; }

        @keyframes pageIn {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ========================================
           HERO
           ======================================== */
        .hero {
            padding: calc(var(--nav-height) + 60px) 0 80px;
            position: relative;
            overflow: hidden;
        }
        .hero__bg-pattern {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse 60% 50% at 65% 20%, var(--accent-subtle) 0%, transparent 70%),
                radial-gradient(ellipse 40% 40% at 20% 80%, rgba(59,91,255,0.03) 0%, transparent 70%);
            pointer-events: none;
        }
        .hero__grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 64px;
            align-items: center;
            position: relative;
        }
        .hero__content { max-width: 560px; }
        .hero__badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--success-bg);
            padding: 6px 14px;
            border-radius: var(--radius-full);
            font-size: 0.78rem;
            font-weight: 600;
            color: #16a34a;
            margin-bottom: 24px;
        }
        [data-theme="dark"] .hero__badge {
            background: rgba(34,197,94,0.1);
            color: #4ade80;
        }
        .hero__badge i { font-size: 0.7rem; }
        .hero__title { margin-bottom: 20px; }
        .hero__title-accent { color: var(--accent); }
        .hero__desc {
            font-size: 1.1rem;
            line-height: 1.75;
            color: var(--text-secondary);
            margin-bottom: 36px;
            max-width: 460px;
        }
        .hero__actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 56px;
        }
        .hero__stats {
            display: flex;
            gap: 40px;
        }
        .hero__stat-value {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 800;
            letter-spacing: -0.03em;
        }
        .hero__stat-label {
            font-size: 0.8rem;
            color: var(--text-tertiary);
            margin-top: 2px;
        }

        /* Hero Featured Car */
        .hero__featured {
            position: relative;
        }
        .hero__car-card {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition);
        }
        .hero__car-image {
            width: 100%;
            height: 300px;
            background: var(--bg-tertiary);
            position: relative;
            overflow: hidden;
        }
        .hero__car-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .hero__car-badge {
            position: absolute;
            top: 16px; left: 16px;
            background: var(--accent);
            color: white;
            padding: 5px 14px;
            border-radius: var(--radius-full);
            font-size: 0.72rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .hero__car-badge i { font-size: 0.7rem; }
        .hero__car-body { padding: 24px; }
        .hero__car-name {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .hero__car-meta {
            display: flex;
            gap: 16px;
            font-size: 0.82rem;
            color: var(--text-tertiary);
            margin-bottom: 16px;
        }
        .hero__car-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .hero__car-meta i { font-size: 0.85rem; }
        .hero__car-price {
            font-family: var(--font-display);
            font-size: 1.4rem;
            font-weight: 800;
        }
        .hero__car-price-label {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            font-weight: 400;
        }

        /* Floating decorative badge */
        .hero__float-card {
            position: absolute;
            bottom: -20px;
            right: -16px;
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            padding: 16px 20px;
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            gap: 12px;
            animation: floatCard 4s ease-in-out infinite;
        }
        @keyframes floatCard {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        .hero__float-icon {
            width: 40px; height: 40px;
            background: var(--success-bg);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--success);
            font-size: 1rem;
        }
        [data-theme="dark"] .hero__float-icon {
            background: rgba(34,197,94,0.1);
        }
        .hero__float-text {
            font-size: 0.82rem;
            font-weight: 600;
        }
        .hero__float-sub {
            font-size: 0.72rem;
            color: var(--text-tertiary);
        }

        /* Brands */
        .brands-strip {
            border-top: 1px solid var(--border-light);
            border-bottom: 1px solid var(--border-light);
            padding: 24px 0;
            background: var(--bg-secondary);
        }
        .brands-strip__inner {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 48px;
            flex-wrap: wrap;
        }
        .brands-strip__item {
            font-family: var(--font-display);
            font-size: 0.82rem;
            font-weight: 700;
            letter-spacing: 2.5px;
            text-transform: uppercase;
            color: var(--text-tertiary);
            opacity: 0.5;
            transition: opacity var(--transition);
        }
        .brands-strip__item:hover { opacity: 0.8; }

        /* ========================================
           FEATURES GRID (Home)
           ======================================== */
        .features { padding: 100px 0; }
        .features__header {
            text-align: center;
            max-width: 540px;
            margin: 0 auto 56px;
        }
        .features__header .label { justify-content: center; margin-bottom: 12px; }
        .features__header .heading-lg { margin-bottom: 16px; }
        .features__grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            padding: 36px 28px;
            transition: all var(--transition);
        }
        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-card-hover);
            border-color: var(--accent);
        }
        .feature-card__icon {
            width: 52px; height: 52px;
            background: var(--accent-light);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: var(--accent);
            margin-bottom: 20px;
        }
        .feature-card__title {
            font-family: var(--font-display);
            font-size: 1.08rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .feature-card__desc {
            font-size: 0.88rem;
            color: var(--text-secondary);
            line-height: 1.65;
        }

        /* ========================================
           CAR LISTINGS (Buy / Rent)
           ======================================== */
        .listings { padding: calc(var(--nav-height) + 40px) 0 80px; }
        .listings__header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 32px;
        }
        .listings__header-text .label { margin-bottom: 8px; }
        .listings__count {
            font-size: 0.85rem;
            color: var(--text-tertiary);
            margin-top: 4px;
        }

        /* Filters */
        .filters {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            padding: 20px 24px;
            margin-bottom: 28px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }
        .filter-group {
            flex: 1;
            min-width: 150px;
        }
        .filter-group label {
            display: block;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-tertiary);
            margin-bottom: 6px;
        }
        .filter-select, .filter-input {
            width: 100%;
            background: var(--bg-input);
            border: 1px solid var(--border-default);
            color: var(--text-primary);
            padding: 10px 14px;
            border-radius: var(--radius-sm);
            font-size: 0.88rem;
            font-family: var(--font-body);
            transition: border-color var(--transition-fast);
            cursor: pointer;
            appearance: auto;
        }
        .filter-select:focus, .filter-input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-subtle);
        }
        .filter-select option { background: var(--bg-card); }
        .filter-reset {
            align-self: flex-end;
            margin-bottom: 0;
        }

        /* Car Grid */
        .car-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(330px, 1fr));
            gap: 20px;
        }
        .car-card {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            overflow: hidden;
            transition: all var(--transition);
            position: relative;
        }
        .car-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-card-hover);
        }
        .car-card__image {
            width: 100%;
            height: 210px;
            background: var(--bg-tertiary);
            position: relative;
            overflow: hidden;
        }
        .car-card__image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }
        .car-card:hover .car-card__image img {
            transform: scale(1.04);
        }
        .car-card__badge {
            position: absolute;
            top: 12px; left: 12px;
            background: var(--bg-card);
            color: var(--text-primary);
            padding: 5px 12px;
            border-radius: var(--radius-full);
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .car-card__badge i { font-size: 0.7rem; }
        .car-card__badge--accent {
            background: var(--accent);
            color: white;
        }
        .car-card__type-badge {
            position: absolute;
            top: 12px; right: 12px;
            padding: 5px 12px;
            border-radius: var(--radius-full);
            font-size: 0.68rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .car-card__type-badge--rent {
            background: rgba(99, 102, 241, 0.9);
            color: white;
        }
        .car-card__type-badge--sale {
            background: rgba(34, 197, 94, 0.9);
            color: white;
        }
        .car-card__body { padding: 20px; }
        .car-card__name {
            font-family: var(--font-display);
            font-size: 1.05rem;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.01em;
        }
        .car-card__specs {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 16px;
        }
        .car-card__spec {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.78rem;
            color: var(--text-tertiary);
        }
        .car-card__spec i { font-size: 0.85rem; color: var(--text-tertiary); }
        .car-card__divider {
            height: 1px;
            background: var(--border-light);
            margin-bottom: 16px;
        }
        .car-card__footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }
        .car-card__price {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 800;
        }
        .car-card__price-sub {
            font-size: 0.72rem;
            color: var(--text-tertiary);
            font-weight: 400;
            font-family: var(--font-body);
        }
        .car-card__location {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.78rem;
            color: var(--text-tertiary);
        }
        .car-card__location i { font-size: 0.8rem; }
        .car-card__cta { padding: 0 20px 20px; }

        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 80px 20px;
        }
        .no-results__icon {
            font-size: 2.5rem;
            color: var(--text-tertiary);
            margin-bottom: 16px;
        }
        .no-results__title {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        /* ========================================
           FORMS (Sell / Sourcing)
           ======================================== */
        .form-page { padding: calc(var(--nav-height) + 40px) 0 80px; }
        .form-page__header {
            max-width: 560px;
            margin-bottom: 40px;
        }
        .form-page__header .label { margin-bottom: 8px; }
        .form-page__header .heading-lg { margin-bottom: 12px; }

        .form-card {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            padding: 36px;
            box-shadow: var(--shadow-card);
            max-width: 720px;
        }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .form-group { display: flex; flex-direction: column; gap: 6px; }
        .form-group--full { grid-column: 1 / -1; }
        .form-group__label {
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--text-secondary);
        }
        .form-control {
            background: var(--bg-input);
            border: 1px solid var(--border-default);
            color: var(--text-primary);
            padding: 12px 16px;
            border-radius: var(--radius-sm);
            font-size: 0.92rem;
            font-family: var(--font-body);
            transition: all var(--transition-fast);
        }
        .form-control:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-subtle);
        }
        .form-control::placeholder { color: var(--text-tertiary); }
        textarea.form-control { resize: vertical; min-height: 100px; }
        select.form-control option { background: var(--bg-card); }

        /* Upload Area */
        .upload-area {
            border: 2px dashed var(--border-default);
            border-radius: var(--radius-md);
            padding: 40px 24px;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition);
            position: relative;
        }
        .upload-area:hover {
            border-color: var(--accent);
            background: var(--accent-subtle);
        }
        .upload-area input[type="file"] {
            position: absolute;
            inset: 0;
            opacity: 0;
            cursor: pointer;
        }
        .upload-area__icon {
            font-size: 2rem;
            color: var(--text-tertiary);
            margin-bottom: 10px;
        }
        .upload-area__text {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        .upload-area__hint {
            font-size: 0.78rem;
            color: var(--text-tertiary);
            margin-top: 4px;
        }
        .upload-previews {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 16px;
        }
        .upload-preview {
            width: 80px; height: 80px;
            border-radius: var(--radius-sm);
            background: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            overflow: hidden;
            position: relative;
        }
        .upload-preview img { width: 100%; height: 100%; object-fit: cover; }
        .upload-preview__remove {
            position: absolute;
            top: 4px; right: 4px;
            width: 20px; height: 20px;
            background: rgba(239,68,68,0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            color: #fff;
            cursor: pointer;
            transition: transform var(--transition-fast);
        }
        .upload-preview__remove:hover { transform: scale(1.15); }

        /* ========================================
           SOURCING FEATURES
           ======================================== */
        .sourcing-steps {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 48px 0;
        }
        .sourcing-step {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            padding: 32px 24px;
            text-align: center;
            transition: all var(--transition);
            position: relative;
        }
        .sourcing-step:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-card-hover);
        }
        .sourcing-step__number {
            position: absolute;
            top: 16px; right: 16px;
            font-family: var(--font-display);
            font-size: 0.72rem;
            font-weight: 800;
            color: var(--text-tertiary);
            opacity: 0.4;
        }
        .sourcing-step__icon {
            width: 56px; height: 56px;
            background: var(--accent-light);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: var(--accent);
            margin: 0 auto 18px;
        }
        .sourcing-step__title {
            font-family: var(--font-display);
            font-size: 1.05rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .sourcing-step__desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* ========================================
           ABOUT
           ======================================== */
        .about { padding: calc(var(--nav-height) + 40px) 0 80px; }
        .about__grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 64px;
            align-items: start;
        }
        .about__content .label { margin-bottom: 8px; }
        .about__content .heading-lg { margin-bottom: 16px; }
        .about__text {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 12px;
        }
        .about__values {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 36px;
        }
        .about__value {
            display: flex;
            gap: 16px;
            align-items: flex-start;
        }
        .about__value-icon {
            width: 48px; height: 48px;
            min-width: 48px;
            background: var(--accent-light);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.15rem;
            color: var(--accent);
        }
        .about__value-title {
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 4px;
        }
        .about__value-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        .about__visual {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            overflow: hidden;
        }
        .about__visual-image {
            width: 100%;
            height: 280px;
            background: var(--bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .about__visual-image img { width: 100%; height: 100%; object-fit: cover; }
        .about__visual-body {
            padding: 28px;
        }
        .about__visual-stat {
            display: flex;
            gap: 32px;
        }
        .about__visual-stat-item { }
        .about__visual-stat-value {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 800;
        }
        .about__visual-stat-label {
            font-size: 0.78rem;
            color: var(--text-tertiary);
        }

        /* ========================================
           CONTACT
           ======================================== */
        .contact { padding: calc(var(--nav-height) + 40px) 0 80px; }
        .contact__header {
            text-align: center;
            max-width: 540px;
            margin: 0 auto 48px;
        }
        .contact__header .label { justify-content: center; margin-bottom: 8px; }
        .contact__header .heading-lg { margin-bottom: 12px; }
        .contact__grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        .contact__card {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            padding: 32px;
        }
        .contact__item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 18px 0;
            border-bottom: 1px solid var(--border-light);
        }
        .contact__item:last-of-type { border-bottom: none; }
        .contact__item-icon {
            width: 48px; height: 48px;
            min-width: 48px;
            background: var(--accent-light);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            color: var(--accent);
        }
        .contact__item-label {
            font-size: 0.82rem;
            font-weight: 600;
        }
        .contact__item-value {
            font-size: 0.88rem;
            color: var(--text-secondary);
        }
        .contact__item-value a {
            color: var(--accent);
            transition: color var(--transition-fast);
        }
        .contact__item-value a:hover { color: var(--accent-hover); }
        .contact__socials {
            display: flex;
            gap: 10px;
            margin-top: 24px;
        }
        .contact__social-link {
            width: 44px; height: 44px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.05rem;
            color: var(--text-secondary);
            transition: all var(--transition);
            cursor: pointer;
        }
        .contact__social-link:hover {
            border-color: var(--accent);
            color: var(--accent);
            background: var(--accent-subtle);
            transform: translateY(-2px);
        }
        .contact__map {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            overflow: hidden;
            min-height: 360px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 12px;
            position: relative;
        }
        .contact__map-pin {
            width: 64px; height: 64px;
            background: var(--accent-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            color: var(--accent);
        }
        .contact__map-text {
            font-family: var(--font-display);
            font-size: 1.15rem;
            font-weight: 700;
        }

        /* ========================================
           FOOTER
           ======================================== */
        .footer {
            border-top: 1px solid var(--border-light);
            padding: 48px 0 32px;
            margin-top: 40px;
            background: var(--bg-secondary);
        }
        .footer__inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        .footer__logo {
            font-family: var(--font-display);
            font-size: 1.15rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 2px;
        }
        .footer__links {
            display: flex;
            gap: 24px;
            list-style: none;
        }
        .footer__link {
            font-size: 0.82rem;
            color: var(--text-tertiary);
            transition: color var(--transition-fast);
            cursor: pointer;
        }
        .footer__link:hover { color: var(--accent); }
        .footer__copy {
            font-size: 0.78rem;
            color: var(--text-tertiary);
        }

        /* ========================================
           WHATSAPP FLOAT
           ======================================== */
        .wa-float {
            position: fixed;
            bottom: 28px; right: 28px;
            z-index: 998;
        }
        .wa-float__btn {
            width: 56px; height: 56px;
            background: var(--whatsapp);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            cursor: pointer;
            transition: all var(--transition);
            box-shadow: 0 4px 16px rgba(37,211,102,0.35);
        }
        .wa-float__btn:hover {
            transform: scale(1.08);
            box-shadow: 0 6px 24px rgba(37,211,102,0.45);
        }

        /* ========================================
           LOGIN OVERLAY
           ======================================== */
        .login-overlay {
            position: fixed;
            inset: 0;
            z-index: 2000;
            background: var(--bg-overlay);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            display: none;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }
        .login-overlay.active { display: flex; }
        .login-card {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            padding: 48px 40px;
            max-width: 420px;
            width: 100%;
            box-shadow: var(--shadow-lg);
            position: relative;
            animation: loginSlide 0.35s ease;
        }
        @keyframes loginSlide {
            from { opacity: 0; transform: translateY(24px) scale(0.97); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .login-card__close {
            position: absolute;
            top: 16px; right: 16px;
            width: 36px; height: 36px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            color: var(--text-tertiary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        .login-card__close:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        .login-card__logo {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 8px;
        }
        .login-card__subtitle {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 32px;
        }
        .login-card .form-group { margin-bottom: 16px; }
        .login-card__error {
            background: rgba(239, 68, 68, 0.08);
            border: 1px solid rgba(239, 68, 68, 0.2);
            color: #ef4444;
            padding: 10px 14px;
            border-radius: var(--radius-sm);
            font-size: 0.82rem;
            margin-bottom: 16px;
            display: none;
        }
        .login-card__error.show { display: block; }
        .login-card__divider {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 24px 0;
            font-size: 0.78rem;
            color: var(--text-tertiary);
        }
        .login-card__divider::before,
        .login-card__divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border-default);
        }
        .login-card__alt {
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 20px;
        }
        .login-card__alt a {
            color: var(--accent);
            font-weight: 600;
            cursor: pointer;
        }
        .login-card__alt a:hover { text-decoration: underline; }

        /* Password visibility toggle */
        .input-with-icon {
            position: relative;
        }
        .input-with-icon .form-control {
            padding-right: 44px;
        }
        .input-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
            cursor: pointer;
            font-size: 1rem;
            padding: 4px;
        }
        .input-toggle:hover { color: var(--text-secondary); }

        /* ========================================
           SUBSCRIPTION PAYWALL
           ======================================== */
        .paywall { padding: calc(var(--nav-height) + 48px) 0 80px; }
        .paywall__header {
            text-align: center;
            max-width: 600px;
            margin: 0 auto 48px;
        }
        .paywall__header .label { justify-content: center; margin-bottom: 12px; }
        .paywall__header .heading-lg { margin-bottom: 12px; }
        .paywall__header .body-lg { max-width: 480px; margin: 0 auto; }
        .paywall__toggle {
            display: inline-flex;
            background: var(--bg-secondary);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-full);
            padding: 4px;
            gap: 4px;
            margin-top: 24px;
        }
        .paywall__toggle-btn {
            padding: 8px 20px;
            border-radius: var(--radius-full);
            font-size: 0.82rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            color: var(--text-secondary);
        }
        .paywall__toggle-btn.active {
            background: var(--bg-card);
            color: var(--text-primary);
            box-shadow: var(--shadow-xs);
        }
        .paywall__grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            max-width: 1080px;
            margin: 0 auto;
        }
        .tier-card {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            padding: 32px 24px;
            display: flex;
            flex-direction: column;
            transition: all var(--transition);
            position: relative;
            overflow: hidden;
        }
        .tier-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-card-hover);
        }
        .tier-card--popular {
            border-color: var(--accent);
            box-shadow: 0 0 0 1px var(--accent), var(--shadow-md);
        }
        .tier-card--popular::before {
            content: 'Most Popular';
            position: absolute;
            top: 0; left: 0; right: 0;
            background: var(--accent);
            color: white;
            text-align: center;
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
            padding: 6px;
        }
        .tier-card--popular .tier-card__inner { padding-top: 16px; }
        .tier-card__icon {
            width: 48px; height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            margin-bottom: 16px;
        }
        .tier-card__icon--free { background: var(--bg-secondary); color: var(--text-secondary); }
        .tier-card__icon--basic { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
        .tier-card__icon--standard { background: rgba(139, 92, 246, 0.1); color: #8b5cf6; }
        .tier-card__icon--premium { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
        .tier-card__name {
            font-family: var(--font-display);
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 4px;
            text-transform: capitalize;
        }
        .tier-card__desc {
            font-size: 0.82rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.5;
        }
        .tier-card__price {
            display: flex;
            align-items: baseline;
            gap: 4px;
            margin-bottom: 4px;
        }
        .tier-card__amount {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 800;
            letter-spacing: -0.03em;
        }
        .tier-card__period {
            font-size: 0.82rem;
            color: var(--text-tertiary);
        }
        .tier-card__billing {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            margin-bottom: 24px;
        }
        .tier-card__features {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 28px;
            flex: 1;
        }
        .tier-card__feature {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        .tier-card__feature i {
            color: var(--success);
            font-size: 0.85rem;
            margin-top: 2px;
            flex-shrink: 0;
        }
        .tier-card__feature--disabled {
            color: var(--text-tertiary);
            opacity: 0.5;
        }
        .tier-card__feature--disabled i { color: var(--text-tertiary); }
        .tier-card__cta .btn { width: 100%; }
        .tier-card__current {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            width: 100%;
            padding: 12px 28px;
            border-radius: var(--radius-full);
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-tertiary);
            background: var(--bg-secondary);
            border: 1px solid var(--border-default);
        }

        /* Payment method selector */
        .pay-methods {
            display: flex;
            gap: 8px;
            margin-top: 24px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .pay-method {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            border: 1px solid var(--border-default);
            border-radius: var(--radius-full);
            font-size: 0.82rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        .pay-method:hover, .pay-method.active {
            border-color: var(--accent);
            color: var(--accent);
            background: var(--accent-subtle);
        }
        .pay-method i { font-size: 1rem; }

        /* Guarantee strip */
        .paywall__guarantee {
            display: flex;
            justify-content: center;
            gap: 32px;
            margin-top: 48px;
            flex-wrap: wrap;
        }
        .paywall__guarantee-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.82rem;
            color: var(--text-tertiary);
        }
        .paywall__guarantee-item i {
            font-size: 1rem;
            color: var(--success);
        }

        /* ========================================
           ADMIN DASHBOARD
           ======================================== */
        .admin { padding: calc(var(--nav-height) + 40px) 0 80px; }
        .admin__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }
        .admin__stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }
        .admin__stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            padding: 24px;
        }
        .admin__stat-label {
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        .admin__stat-value {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 800;
        }
        .admin__section {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            overflow: hidden;
            margin-bottom: 24px;
        }
        .admin__section-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .admin__section-title {
            font-family: var(--font-display);
            font-size: 1.05rem;
            font-weight: 700;
        }
        .admin__table {
            width: 100%;
            border-collapse: collapse;
        }
        .admin__table th {
            background: var(--bg-secondary);
            text-align: left;
            padding: 12px 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-tertiary);
        }
        .admin__table td {
            padding: 14px 20px;
            font-size: 0.88rem;
            border-bottom: 1px solid var(--border-light);
        }
        .admin__table tr:last-child td { border-bottom: none; }
        .admin__table tr:hover td {
            background: var(--bg-secondary);
        }
        .admin__badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: var(--radius-full);
            font-size: 0.72rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        .admin__badge--pending {
            background: rgba(245, 158, 11, 0.1);
            color: #f59e0b;
        }
        .admin__badge--awaiting {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }
        .admin__badge--completed {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
        }
        .admin__badge--failed {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }
        .admin__actions {
            display: flex;
            gap: 6px;
        }
        .admin__btn {
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: 1px solid transparent;
        }
        .admin__btn--approve {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
            border-color: rgba(34, 197, 94, 0.2);
        }
        .admin__btn--approve:hover { background: rgba(34, 197, 94, 0.2); }
        .admin__btn--reject {
            background: rgba(239, 68, 68, 0.08);
            color: #ef4444;
            border-color: rgba(239, 68, 68, 0.15);
        }
        .admin__btn--reject:hover { background: rgba(239, 68, 68, 0.15); }
        .admin__no-data {
            padding: 48px 24px;
            text-align: center;
            color: var(--text-tertiary);
            font-size: 0.9rem;
        }

        /* User bar (top of paywall after login) */
        .user-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            padding: 16px 24px;
            margin-bottom: 32px;
        }
        .user-bar__info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .user-bar__avatar {
            width: 40px; height: 40px;
            background: var(--accent-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: 700;
            color: var(--accent);
        }
        .user-bar__name { font-weight: 600; font-size: 0.9rem; }
        .user-bar__tier {
            font-size: 0.78rem;
            color: var(--text-tertiary);
        }
        .user-bar__actions { display: flex; gap: 8px; }

        /* ========================================
           SCROLL ANIMATIONS
           ======================================== */
        .reveal {
            opacity: 0;
            transform: translateY(24px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ========================================
           RESPONSIVE
           ======================================== */
        @media (max-width: 1024px) {
            .hero__grid { grid-template-columns: 1fr; gap: 40px; }
            .hero__featured { max-width: 500px; }
            .about__grid { grid-template-columns: 1fr; }
            .contact__grid { grid-template-columns: 1fr; }
            .features__grid { grid-template-columns: 1fr 1fr; }
            .sourcing-steps { grid-template-columns: 1fr 1fr; }
            .paywall__grid { grid-template-columns: repeat(2, 1fr); }
            .admin__stats { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 768px) {
            :root { --nav-height: 64px; }
            .nav__links { display: none; }
            .nav__hamburger { display: flex; }
            .hero { padding-top: calc(var(--nav-height) + 32px); padding-bottom: 48px; }
            .hero__stats { gap: 24px; }
            .hero__float-card { display: none; }
            .features__grid { grid-template-columns: 1fr; }
            .sourcing-steps { grid-template-columns: 1fr; }
            .car-grid { grid-template-columns: 1fr; }
            .form-grid { grid-template-columns: 1fr; }
            .filters { flex-direction: column; }
            .filter-group { min-width: 0; width: 100%; }
            .footer__inner { flex-direction: column; text-align: center; }
            .footer__links { justify-content: center; }
            .form-card { padding: 24px; }
            .paywall__grid { grid-template-columns: 1fr; max-width: 400px; margin: 0 auto; }
            .admin__stats { grid-template-columns: 1fr; }
            .admin__table { font-size: 0.8rem; }
            .admin__table th, .admin__table td { padding: 10px 12px; }
            .login-card { padding: 32px 24px; }
            .user-bar { flex-direction: column; gap: 12px; text-align: center; }
            .user-bar__info { flex-direction: column; }
        }
        @media (max-width: 480px) {
            .container { padding: 0 16px; }
            .hero__actions { flex-direction: column; }
            .hero__actions .btn { width: 100%; }
            .brands-strip__inner { gap: 24px; }
            .wa-float { bottom: 20px; right: 20px; }
            .wa-float__btn { width: 52px; height: 52px; font-size: 1.3rem; }
            .paywall__guarantee { gap: 16px; flex-direction: column; align-items: center; }
            .tier-card { padding: 24px 20px; }
        }
    </style>
</head>
<body>

    <!-- ===== NAVIGATION ===== -->
    <nav class="nav" id="navbar">
        <div class="container nav__inner">
            <div class="nav__logo" onclick="navigate('home')">
                PrimeDrive<span class="nav__logo-dot"></span>
            </div>
            <ul class="nav__links">
                <li><a class="nav__link active" data-nav="home" onclick="navigate('home')">Home</a></li>
                <li><a class="nav__link" data-nav="buy" onclick="navigate('buy')">Buy</a></li>
                <li><a class="nav__link" data-nav="rent" onclick="navigate('rent')">Rent</a></li>
                <li><a class="nav__link" data-nav="sell" onclick="navigate('sell')">Sell</a></li>
                <li><a class="nav__link" data-nav="sourcing" onclick="navigate('sourcing')">Sourcing</a></li>
                <li><a class="nav__link" data-nav="about" onclick="navigate('about')">About</a></li>
                <li><a class="nav__link" data-nav="contact" onclick="navigate('contact')">Contact</a></li>
            </ul>
            <div class="nav__actions">
                <div class="nav__theme-toggle" onclick="toggleTheme()" title="Toggle theme">
                    <i class="bi bi-moon" id="themeIcon"></i>
                </div>
                <a href="https://wa.me/26777625997" target="_blank" class="btn btn--whatsapp btn--sm" style="display:none;" id="navWaBtn">
                    <i class="bi bi-whatsapp"></i> Chat
                </a>
                <button class="btn btn--primary btn--sm" id="navLoginBtn" onclick="showLogin()">
                    <i class="bi bi-person"></i> Login
                </button>
                <button class="btn btn--secondary btn--sm" id="navUserBtn" onclick="navigate('dashboard')" style="display:none;">
                    <i class="bi bi-grid"></i> Dashboard
                </button>
                <div class="nav__hamburger" id="hamburger" onclick="toggleMobileNav()">
                    <div class="nav__hamburger-icon">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Nav -->
    <div class="mobile-nav" id="mobileNav">
        <a class="mobile-nav__link active" data-nav="home" onclick="navigate('home'); toggleMobileNav();">
            <i class="bi bi-house"></i> Home
        </a>
        <a class="mobile-nav__link" data-nav="buy" onclick="navigate('buy'); toggleMobileNav();">
            <i class="bi bi-car-front"></i> Buy Cars
        </a>
        <a class="mobile-nav__link" data-nav="rent" onclick="navigate('rent'); toggleMobileNav();">
            <i class="bi bi-key"></i> Rent Cars
        </a>
        <a class="mobile-nav__link" data-nav="sell" onclick="navigate('sell'); toggleMobileNav();">
            <i class="bi bi-tag"></i> Sell Your Car
        </a>
        <a class="mobile-nav__link" data-nav="sourcing" onclick="navigate('sourcing'); toggleMobileNav();">
            <i class="bi bi-search"></i> Car Sourcing
        </a>
        <a class="mobile-nav__link" data-nav="about" onclick="navigate('about'); toggleMobileNav();">
            <i class="bi bi-info-circle"></i> About Us
        </a>
        <a class="mobile-nav__link" data-nav="contact" onclick="navigate('contact'); toggleMobileNav();">
            <i class="bi bi-envelope"></i> Contact
        </a>
        <div class="mobile-nav__divider"></div>
        <a href="https://wa.me/26777625997" target="_blank" class="btn btn--whatsapp btn--full" style="margin-top:8px;">
            <i class="bi bi-whatsapp"></i> Chat on WhatsApp
        </a>
        <a class="mobile-nav__link" id="mobileLoginBtn" onclick="showLogin(); toggleMobileNav();">
            <i class="bi bi-person"></i> Login
        </a>
        <a class="mobile-nav__link" id="mobileDashBtn" onclick="navigate('dashboard'); toggleMobileNav();" style="display:none;">
            <i class="bi bi-grid"></i> Dashboard
        </a>
    </div>


    <!-- ===== LOGIN OVERLAY ===== -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-card">
            <div class="login-card__close" onclick="hideLogin()"><i class="bi bi-x-lg"></i></div>
            <div class="login-card__logo">PrimeDrive<span class="nav__logo-dot"></span></div>
            <div class="login-card__subtitle">Sign in to manage your listings</div>

            <div class="login-card__error" id="loginError"></div>

            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-group__label">Email</label>
                    <input type="email" class="form-control" id="loginEmail" placeholder="you@example.com" required>
                </div>
                <div class="form-group">
                    <label class="form-group__label">Password</label>
                    <div class="input-with-icon">
                        <input type="password" class="form-control" id="loginPassword" placeholder="Enter your password" required minlength="6">
                        <span class="input-toggle" onclick="togglePasswordVis()"><i class="bi bi-eye" id="passEyeIcon"></i></span>
                    </div>
                </div>
                <div style="margin-top: 24px;">
                    <button type="submit" class="btn btn--primary btn--full" id="loginSubmitBtn">
                        <i class="bi bi-arrow-right"></i> Sign In
                    </button>
                </div>
            </form>

            <div class="login-card__divider">or</div>

            <button class="btn btn--outline btn--full" onclick="switchToSignup()" id="loginSignupSwitch">
                <i class="bi bi-person-plus"></i> Create Account
            </button>

            <!-- Signup form (hidden by default) -->
            <form id="signupForm" onsubmit="handleSignup(event)" style="display: none;">
                <div class="form-group">
                    <label class="form-group__label">Email</label>
                    <input type="email" class="form-control" id="signupEmail" placeholder="you@example.com" required>
                </div>
                <div class="form-group">
                    <label class="form-group__label">Password</label>
                    <input type="password" class="form-control" id="signupPassword" placeholder="Min 6 characters" required minlength="6">
                </div>
                <div class="form-group">
                    <label class="form-group__label">Phone (optional)</label>
                    <input type="tel" class="form-control" id="signupPhone" placeholder="+267...">
                </div>
                <div class="form-group">
                    <label class="form-group__label">WhatsApp (optional)</label>
                    <input type="tel" class="form-control" id="signupWhatsApp" placeholder="+267...">
                </div>
                <div style="margin-top: 24px;">
                    <button type="submit" class="btn btn--primary btn--full" id="signupSubmitBtn">
                        <i class="bi bi-check-lg"></i> Create Account
                    </button>
                </div>
            </form>

            <div class="login-card__alt" id="loginAltText">
                Admin testing? Use your Supabase credentials.
            </div>
        </div>
    </div>


    <!-- ============================= -->
    <!-- PAGE: HOME                    -->
    <!-- ============================= -->
    <div class="page active" id="page-home">
        <section class="hero">
            <div class="hero__bg-pattern"></div>
            <div class="container">
                <div class="hero__grid">
                    <div class="hero__content">
                        <div class="hero__badge">
                            <i class="bi bi-patch-check-fill"></i>
                            Verified Marketplace
                        </div>
                        <h1 class="heading-xl hero__title">
                            Buy, Rent &amp; Sell<br>
                            <span class="hero__title-accent">Trusted Cars</span><br>
                            in Botswana
                        </h1>
                        <p class="hero__desc">
                            Your trusted car marketplace in Botswana. We source quality pre-owned vehicles
                            locally, ensuring transparent deals and easy communication.
                        </p>
                        <div class="hero__actions">
                            <button class="btn btn--primary btn--lg" onclick="navigate('buy')">
                                <i class="bi bi-car-front"></i> Browse Cars
                            </button>
                            <button class="btn btn--outline btn--lg" onclick="navigate('sell')">
                                <i class="bi bi-plus-circle"></i> List Your Car
                            </button>
                        </div>
                        <div class="hero__stats">
                            <div>
                                <div class="hero__stat-value">Local</div>
                                <div class="hero__stat-label">Sourcing</div>
                            </div>
                            <div>
                                <div class="hero__stat-value">100%</div>
                                <div class="hero__stat-label">Verified</div>
                            </div>
                            <div>
                                <div class="hero__stat-value">&lt;24h</div>
                                <div class="hero__stat-label">Response</div>
                            </div>
                        </div>
                    </div>
                    <div class="hero__featured">
                        <div class="hero__car-card">
                            <div class="hero__car-image" style="height:400px; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:16px;">
                                <div style="width:80px; height:80px; background:var(--accent-light); border-radius:var(--radius-md); display:flex; align-items:center; justify-content:center; font-size:2rem; color:var(--accent);">
                                    <i class="bi bi-car-front"></i>
                                </div>
                                <div style="text-align:center; padding:0 24px;">
                                    <div class="hero__car-name" style="margin-bottom:12px;">Looking for your next car?</div>
                                    <p class="body-sm" style="margin-bottom:20px;">We source quality vehicles locally in Botswana. Contact us with your requirements.</p>
                                    <a href="https://wa.me/26777625997" target="_blank" class="btn btn--whatsapp btn--sm">
                                        <i class="bi bi-whatsapp"></i> Chat Now
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Brands -->
        <div class="brands-strip">
            <div class="container brands-strip__inner">
                <span class="brands-strip__item">Toyota</span>
                <span class="brands-strip__item">BMW</span>
                <span class="brands-strip__item">Mercedes-Benz</span>
                <span class="brands-strip__item">Ford</span>
                <span class="brands-strip__item">Volkswagen</span>
                <span class="brands-strip__item">Hyundai</span>
                <span class="brands-strip__item">Nissan</span>
                <span class="brands-strip__item">Honda</span>
            </div>
        </div>

        <!-- Features -->
        <section class="features">
            <div class="container">
                <div class="features__header">
                    <div class="label"><i class="bi bi-lightning-charge-fill"></i> Why PrimeDrive</div>
                    <h2 class="heading-lg">The smarter way to buy &amp; sell cars</h2>
                    <p class="body-lg">We built PrimeDrive to solve the biggest problems in Botswana's used car market.</p>
                </div>
                <div class="features__grid">
                    <div class="feature-card reveal">
                        <div class="feature-card__icon"><i class="bi bi-shield-check"></i></div>
                        <div class="feature-card__title">Scam-Free Deals</div>
                        <div class="feature-card__desc">Every vehicle is verified before listing. We protect you from fraud so you buy with total confidence.</div>
                    </div>
                    <div class="feature-card reveal">
                        <div class="feature-card__icon"><i class="bi bi-lightning-charge"></i></div>
                        <div class="feature-card__title">Fast Turnaround</div>
                        <div class="feature-card__desc">From inquiry to keys in hand — we close deals fast so you're on the road sooner, not later.</div>
                    </div>
                    <div class="feature-card reveal">
                        <div class="feature-card__icon"><i class="bi bi-whatsapp"></i></div>
                        <div class="feature-card__title">Easy Communication</div>
                        <div class="feature-card__desc">Chat directly with sellers made easy and convenient. Quick responses and straightforward communication.</div>
                    </div>
                    <div class="feature-card reveal">
                        <div class="feature-card__icon"><i class="bi bi-key"></i></div>
                        <div class="feature-card__title">Rentals Available</div>
                        <div class="feature-card__desc">Need a car temporarily? Browse our rental fleet for daily, weekly, or monthly bookings across Botswana.</div>
                    </div>
                    <div class="feature-card reveal">
                        <div class="feature-card__icon"><i class="bi bi-globe-americas"></i></div>
                        <div class="feature-card__title">Car Sourcing</div>
                        <div class="feature-card__desc">Can't find what you're looking for? We source quality vehicles locally in Botswana from trusted sellers.</div>
                    </div>
                    <div class="feature-card reveal">
                        <div class="feature-card__icon"><i class="bi bi-geo-alt"></i></div>
                        <div class="feature-card__title">Local Expertise</div>
                        <div class="feature-card__desc">Based in Gaborone, we understand the Botswana market and connect buyers and sellers nationwide.</div>
                    </div>
                </div>
            </div>
        </section>
    </div>


    <!-- ============================= -->
    <!-- PAGE: BUY CARS                -->
    <!-- ============================= -->
    <div class="page" id="page-buy">
        <section class="listings">
            <div class="container">
                <div class="listings__header">
                    <div class="listings__header-text">
                        <div class="label"><i class="bi bi-car-front-fill"></i> Buy Cars</div>
                        <h1 class="heading-lg">Cars for Sale</h1>
                        <div class="listings__count" id="buyCount">Showing 0 cars</div>
                    </div>
                </div>

                <div class="filters" id="buyFilters">
                    <div class="filter-group">
                        <label>Brand</label>
                        <select class="filter-select" id="buyFilterBrand" onchange="applyBuyFilters()">
                            <option value="">All Brands</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Price Range</label>
                        <select class="filter-select" id="buyFilterPrice" onchange="applyBuyFilters()">
                            <option value="">Any Price</option>
                            <option value="0-100000">Under P100,000</option>
                            <option value="100000-200000">P100k &ndash; P200k</option>
                            <option value="200000-400000">P200k &ndash; P400k</option>
                            <option value="400000-999999999">P400k+</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Year</label>
                        <select class="filter-select" id="buyFilterYear" onchange="applyBuyFilters()">
                            <option value="">Any Year</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Transmission</label>
                        <select class="filter-select" id="buyFilterTrans" onchange="applyBuyFilters()">
                            <option value="">Any</option>
                            <option value="Automatic">Automatic</option>
                            <option value="Manual">Manual</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Location</label>
                        <select class="filter-select" id="buyFilterLocation" onchange="applyBuyFilters()">
                            <option value="">All Locations</option>
                        </select>
                    </div>
                    <div class="filter-group filter-reset" style="flex:0;">
                        <label>&nbsp;</label>
                        <button class="btn btn--ghost btn--sm" onclick="resetBuyFilters()"><i class="bi bi-arrow-counterclockwise"></i> Reset</button>
                    </div>
                </div>

                <div class="car-grid" id="buyGrid"></div>
            </div>
        </section>
    </div>


    <!-- ============================= -->
    <!-- PAGE: RENT CARS               -->
    <!-- ============================= -->
    <div class="page" id="page-rent">
        <section class="listings">
            <div class="container">
                <div class="listings__header">
                    <div class="listings__header-text">
                        <div class="label"><i class="bi bi-key-fill"></i> Rent Cars</div>
                        <h1 class="heading-lg">Cars for Rent</h1>
                        <div class="listings__count" id="rentCount">Showing 0 cars</div>
                    </div>
                </div>

                <div class="filters" id="rentFilters">
                    <div class="filter-group">
                        <label>Brand</label>
                        <select class="filter-select" id="rentFilterBrand" onchange="applyRentFilters()">
                            <option value="">All Brands</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Daily Rate</label>
                        <select class="filter-select" id="rentFilterPrice" onchange="applyRentFilters()">
                            <option value="">Any Rate</option>
                            <option value="0-500">Under P500/day</option>
                            <option value="500-1000">P500 &ndash; P1,000/day</option>
                            <option value="1000-999999">P1,000+/day</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Year</label>
                        <select class="filter-select" id="rentFilterYear" onchange="applyRentFilters()">
                            <option value="">Any Year</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Transmission</label>
                        <select class="filter-select" id="rentFilterTrans" onchange="applyRentFilters()">
                            <option value="">Any</option>
                            <option value="Automatic">Automatic</option>
                            <option value="Manual">Manual</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Location</label>
                        <select class="filter-select" id="rentFilterLocation" onchange="applyRentFilters()">
                            <option value="">All Locations</option>
                        </select>
                    </div>
                    <div class="filter-group filter-reset" style="flex:0;">
                        <label>&nbsp;</label>
                        <button class="btn btn--ghost btn--sm" onclick="resetRentFilters()"><i class="bi bi-arrow-counterclockwise"></i> Reset</button>
                    </div>
                </div>

                <div class="car-grid" id="rentGrid"></div>
            </div>
        </section>
    </div>


    <!-- ============================= -->
    <!-- PAGE: SELL YOUR CAR           -->
    <!-- ============================= -->
    <div class="page" id="page-sell">
        <section class="form-page">
            <div class="container">
                <div class="form-page__header">
                    <div class="label"><i class="bi bi-tag-fill"></i> Sell Your Car</div>
                    <h1 class="heading-lg">List your vehicle</h1>
                    <p class="body-lg">Fill in the details and we'll connect you with serious buyers through WhatsApp.</p>
                </div>

                <div class="form-card">
                    <form id="sellForm" onsubmit="submitSellForm(event)">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-group__label">Car Brand *</label>
                                <input type="text" class="form-control" id="sellBrand" placeholder="e.g. Toyota" required>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Model *</label>
                                <input type="text" class="form-control" id="sellModel" placeholder="e.g. Hilux 2.8 GD-6" required>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Year *</label>
                                <input type="number" class="form-control" id="sellYear" placeholder="e.g. 2020" min="1990" max="2026" required>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Mileage (km) *</label>
                                <input type="number" class="form-control" id="sellMileage" placeholder="e.g. 45000" required>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Transmission *</label>
                                <select class="form-control" id="sellTransmission" required>
                                    <option value="">Select</option>
                                    <option value="Automatic">Automatic</option>
                                    <option value="Manual">Manual</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Condition *</label>
                                <select class="form-control" id="sellCondition" required>
                                    <option value="">Select condition</option>
                                    <option value="Excellent">Excellent</option>
                                    <option value="Good">Good</option>
                                    <option value="Fair">Fair</option>
                                    <option value="Needs Work">Needs Work</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Asking Price (BWP) *</label>
                                <input type="number" class="form-control" id="sellPrice" placeholder="e.g. 250000" required>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Location *</label>
                                <input type="text" class="form-control" id="sellLocation" placeholder="e.g. Gaborone" required>
                            </div>
                            <div class="form-group form-group--full">
                                <label class="form-group__label">Your Name *</label>
                                <input type="text" class="form-control" id="sellName" placeholder="Your full name" required>
                            </div>
                            <div class="form-group form-group--full">
                                <label class="form-group__label">Additional Notes</label>
                                <textarea class="form-control" id="sellNotes" placeholder="Features, service history, reason for selling..."></textarea>
                            </div>
                            <div class="form-group form-group--full">
                                <label class="form-group__label">Photos (up to 6)</label>
                                <div class="upload-area" id="uploadArea">
                                    <input type="file" accept="image/*" multiple id="photoInput" onchange="handlePhotos(event)">
                                    <div class="upload-area__icon"><i class="bi bi-cloud-arrow-up"></i></div>
                                    <div class="upload-area__text">Click or drag to upload photos</div>
                                    <div class="upload-area__hint">Max 6 photos &middot; JPG, PNG</div>
                                </div>
                                <div class="upload-previews" id="photoPreviews"></div>
                            </div>
                            <div class="form-group form-group--full">
                                <button type="submit" class="btn btn--whatsapp btn--lg btn--full">
                                    <i class="bi bi-whatsapp"></i> Submit via WhatsApp
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </div>


    <!-- ============================= -->
    <!-- PAGE: CAR SOURCING            -->
    <!-- ============================= -->
    <div class="page" id="page-sourcing">
        <section class="form-page">
            <div class="container">
                <div style="text-align:center; max-width:600px; margin:0 auto;">
                    <div class="label" style="justify-content:center;"><i class="bi bi-search-heart-fill"></i> Car Sourcing</div>
                    <h1 class="heading-lg" style="margin: 8px 0 12px;">We find the car for you</h1>
                    <p class="body-lg" style="margin: 0 auto;">Can't find what you're looking for? Tell us your dream car and we'll source it locally in Botswana from our trusted network.</p>
                </div>

                <div class="sourcing-steps">
                    <div class="sourcing-step reveal">
                        <div class="sourcing-step__number">01</div>
                        <div class="sourcing-step__icon"><i class="bi bi-pencil-square"></i></div>
                        <div class="sourcing-step__title">Describe It</div>
                        <div class="sourcing-step__desc">Tell us the brand, model, year range, and your budget. Be as specific as you like.</div>
                    </div>
                    <div class="sourcing-step reveal">
                        <div class="sourcing-step__number">02</div>
                        <div class="sourcing-step__icon"><i class="bi bi-globe"></i></div>
                        <div class="sourcing-step__title">We Search</div>
                        <div class="sourcing-step__desc">We search locally in Botswana through our trusted network of sellers to find your perfect match.</div>
                    </div>
                    <div class="sourcing-step reveal">
                        <div class="sourcing-step__number">03</div>
                        <div class="sourcing-step__icon"><i class="bi bi-hand-thumbs-up"></i></div>
                        <div class="sourcing-step__title">You Decide</div>
                        <div class="sourcing-step__desc">We present the options, you choose. No pressure, no hidden fees, just honest sourcing.</div>
                    </div>
                </div>

                <div class="form-card" style="margin: 0 auto;">
                    <form id="sourcingForm" onsubmit="submitSourcingForm(event)">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-group__label">Preferred Brand *</label>
                                <input type="text" class="form-control" id="srcBrand" placeholder="e.g. BMW" required>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Model *</label>
                                <input type="text" class="form-control" id="srcModel" placeholder="e.g. X5" required>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Year Range *</label>
                                <input type="text" class="form-control" id="srcYear" placeholder="e.g. 2018 - 2022" required>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label">Budget (BWP) *</label>
                                <input type="text" class="form-control" id="srcBudget" placeholder="e.g. 300,000 - 500,000" required>
                            </div>
                            <div class="form-group form-group--full">
                                <label class="form-group__label">Your Name *</label>
                                <input type="text" class="form-control" id="srcName" placeholder="Your full name" required>
                            </div>
                            <div class="form-group form-group--full">
                                <label class="form-group__label">Preferences</label>
                                <textarea class="form-control" id="srcNotes" placeholder="Color, features, transmission preference, etc."></textarea>
                            </div>
                            <div class="form-group form-group--full">
                                <button type="submit" class="btn btn--whatsapp btn--lg btn--full">
                                    <i class="bi bi-whatsapp"></i> Send Request via WhatsApp
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </div>


    <!-- ============================= -->
    <!-- PAGE: ABOUT US                -->
    <!-- ============================= -->
    <div class="page" id="page-about">
        <section class="about">
            <div class="container">
                <div class="about__grid">
                    <div class="about__content">
                        <div class="label"><i class="bi bi-building"></i> Our Story</div>
                        <h1 class="heading-lg">About PrimeDrive</h1>
                        <p class="about__text">
                            Hi, I'm Thatayotlhe Tsenang, a 21-year-old second-year student at UB. I started PrimeDrive to solve a problem I noticed in Botswana's car market.
                        </p>
                        <p class="about__text">
                            The goal with this platform is simple: reduce the friction between car buyers and sellers. Instead of actively searching through dozens of online posts and unclear listings, everything is in one place &mdash; easy to browse, easy to contact sellers, and transparent.
                        </p>
                        <p class="about__text">
                            Based in Gaborone, I'm building PrimeDrive to connect buyers and sellers across Botswana. Whether you're looking for your first car or ready to sell, I'm here to make the process easier.
                        </p>
                        <div class="about__values">
                            <div class="about__value reveal">
                                <div class="about__value-icon"><i class="bi bi-shield-check"></i></div>
                                <div>
                                    <div class="about__value-title">Trust First</div>
                                    <div class="about__value-desc">Every listing is reviewed. We protect both buyers and sellers from fraud and misrepresentation.</div>
                                </div>
                            </div>
                            <div class="about__value reveal">
                                <div class="about__value-icon"><i class="bi bi-lightning-charge"></i></div>
                                <div>
                                    <div class="about__value-title">Fast Deals</div>
                                    <div class="about__value-desc">Direct communication with sellers means instant responses and quick closings. No waiting around.</div>
                                </div>
                            </div>
                            <div class="about__value reveal">
                                <div class="about__value-icon"><i class="bi bi-gem"></i></div>
                                <div>
                                    <div class="about__value-title">Quality Vehicles</div>
                                    <div class="about__value-desc">We only list cars that meet our standards. No junk, no hidden damage, no surprises.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="about__visual reveal">
                        <div class="about__visual-body" style="padding: 48px 32px; text-align: center;">
                            <div style="width: 80px; height: 80px; background: var(--accent-light); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 2rem; color: var(--accent); margin: 0 auto 24px;">
                                <i class="bi bi-car-front-fill"></i>
                            </div>
                            <h3 class="heading-md" style="margin-bottom: 16px;">Building Something Real</h3>
                            <p class="body-sm" style="margin-bottom: 32px; max-width: 400px; margin-left: auto; margin-right: auto;">
                                PrimeDrive is a work in progress. I'm actively building this platform to make car buying and selling in Botswana more accessible and transparent.
                            </p>
                            <div class="about__visual-stat">
                                <div class="about__visual-stat-item">
                                    <div class="about__visual-stat-value">Local</div>
                                    <div class="about__visual-stat-label">Botswana</div>
                                </div>
                                <div class="about__visual-stat-item">
                                    <div class="about__visual-stat-value">100%</div>
                                    <div class="about__visual-stat-label">Verified</div>
                                </div>
                                <div class="about__visual-stat-item">
                                    <div class="about__visual-stat-value">Fast</div>
                                    <div class="about__visual-stat-label">Service</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>


    <!-- ============================= -->
    <!-- PAGE: CONTACT                 -->
    <!-- ============================= -->
    <div class="page" id="page-contact">
        <section class="contact">
            <div class="container">
                <div class="contact__header">
                    <div class="label"><i class="bi bi-chat-dots-fill"></i> Get in Touch</div>
                    <h1 class="heading-lg">Contact Us</h1>
                    <p class="body-lg">Have a question or ready to deal? Reach out and we'll respond within 24 hours.</p>
                </div>
                <div class="contact__grid">
                    <div class="contact__card">
                        <div class="contact__item">
                            <div class="contact__item-icon"><i class="bi bi-telephone"></i></div>
                            <div>
                                <div class="contact__item-label">Phone</div>
                                <div class="contact__item-value"><a href="tel:+26777625997">+267 77 625 997</a></div>
                            </div>
                        </div>
                        <div class="contact__item">
                            <div class="contact__item-icon"><i class="bi bi-whatsapp"></i></div>
                            <div>
                                <div class="contact__item-label">WhatsApp</div>
                                <div class="contact__item-value"><a href="https://wa.me/26777625997" target="_blank">Chat with us now</a></div>
                            </div>
                        </div>
                        <div class="contact__item">
                            <div class="contact__item-icon"><i class="bi bi-envelope"></i></div>
                            <div>
                                <div class="contact__item-label">Email</div>
                                <div class="contact__item-value"><a href="mailto:PrimeDrive26@gmail.com">PrimeDrive26@gmail.com</a></div>
                            </div>
                        </div>
                        <div class="contact__item">
                            <div class="contact__item-icon"><i class="bi bi-geo-alt"></i></div>
                            <div>
                                <div class="contact__item-label">Location</div>
                                <div class="contact__item-value">Gaborone, Botswana</div>
                            </div>
                        </div>
                        <div class="contact__socials">
                            <a href="https://wa.me/26777625997" target="_blank" class="contact__social-link" title="WhatsApp"><i class="bi bi-whatsapp"></i></a>
                            <a href="#" class="contact__social-link" title="Facebook"><i class="bi bi-facebook"></i></a>
                            <a href="#" class="contact__social-link" title="Instagram"><i class="bi bi-instagram"></i></a>
                            <a href="#" class="contact__social-link" title="TikTok"><i class="bi bi-tiktok"></i></a>
                            <a href="#" class="contact__social-link" title="Twitter / X"><i class="bi bi-twitter-x"></i></a>
                        </div>
                    </div>
                    <div class="contact__map">
                        <div class="contact__map-pin"><i class="bi bi-geo-alt-fill"></i></div>
                        <div class="contact__map-text">Gaborone, Botswana</div>
                        <div class="body-sm">Serving all major cities across Botswana</div>
                    </div>
                </div>
            </div>
        </section>
    </div>


    <!-- ============================= -->
    <!-- PAGE: DASHBOARD (Subscription Paywall + Admin) -->
    <!-- ============================= -->
    <div class="page" id="page-dashboard">

        <!-- Subscription Paywall Section -->
        <section class="paywall" id="paywallSection">
            <div class="container">

                <!-- User bar (shows when logged in) -->
                <div class="user-bar" id="userBar" style="display: none;">
                    <div class="user-bar__info">
                        <div class="user-bar__avatar" id="userAvatar">A</div>
                        <div>
                            <div class="user-bar__name" id="userDisplayName">Admin</div>
                            <div class="user-bar__tier" id="userTierDisplay">Free Tier &middot; 0/1 Listings</div>
                        </div>
                    </div>
                    <div class="user-bar__actions">
                        <button class="btn btn--secondary btn--sm" onclick="navigate('sell')">
                            <i class="bi bi-plus-circle"></i> New Listing
                        </button>
                        <button class="btn btn--ghost btn--sm" onclick="handleLogout()">
                            <i class="bi bi-box-arrow-right"></i> Logout
                        </button>
                    </div>
                </div>

                <div class="paywall__header">
                    <div class="label"><i class="bi bi-rocket-takeoff-fill"></i> Choose Your Plan</div>
                    <h1 class="heading-lg">Start listing your cars today</h1>
                    <p class="body-lg">Simple and affordable plans for sellers in Botswana. No hidden fees, cancel anytime.</p>
                </div>

                <div class="paywall__grid" id="tiersGrid">

                    <!-- Free Tier -->
                    <div class="tier-card reveal">
                        <div class="tier-card__inner">
                            <div class="tier-card__icon tier-card__icon--free"><i class="bi bi-person"></i></div>
                            <div class="tier-card__name">Free</div>
                            <div class="tier-card__desc">Get started with one listing</div>
                            <div class="tier-card__price">
                                <span class="tier-card__amount">P0</span>
                                <span class="tier-card__period">forever</span>
                            </div>
                            <div class="tier-card__billing">No credit card required</div>
                            <ul class="tier-card__features">
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> 1 active listing</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> 90-day listing duration</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> WhatsApp support</li>
                                <li class="tier-card__feature tier-card__feature--disabled"><i class="bi bi-x-circle"></i> No featured badge</li>
                                <li class="tier-card__feature tier-card__feature--disabled"><i class="bi bi-x-circle"></i> No priority placement</li>
                            </ul>
                            <div class="tier-card__cta">
                                <div class="tier-card__current" id="tierBtnFree">
                                    <i class="bi bi-check2"></i> Current Plan
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Basic Tier -->
                    <div class="tier-card reveal">
                        <div class="tier-card__inner">
                            <div class="tier-card__icon tier-card__icon--basic"><i class="bi bi-lightning"></i></div>
                            <div class="tier-card__name">Basic</div>
                            <div class="tier-card__desc">Perfect for casual sellers</div>
                            <div class="tier-card__price">
                                <span class="tier-card__amount">P25</span>
                                <span class="tier-card__period">/month</span>
                            </div>
                            <div class="tier-card__billing">Billed monthly via mobile money</div>
                            <ul class="tier-card__features">
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> 3 active listings</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> 90-day listing duration</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> Priority WhatsApp support</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> Edit listings anytime</li>
                                <li class="tier-card__feature tier-card__feature--disabled"><i class="bi bi-x-circle"></i> No featured badge</li>
                            </ul>
                            <div class="tier-card__cta">
                                <button class="btn btn--secondary btn--full" onclick="initiatePurchase('basic')" id="tierBtnBasic">
                                    Upgrade to Basic
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Standard Tier (Popular) -->
                    <div class="tier-card tier-card--popular reveal">
                        <div class="tier-card__inner" style="padding-top: 16px;">
                            <div class="tier-card__icon tier-card__icon--standard"><i class="bi bi-star"></i></div>
                            <div class="tier-card__name">Standard</div>
                            <div class="tier-card__desc">For active sellers &amp; small dealers</div>
                            <div class="tier-card__price">
                                <span class="tier-card__amount">P60</span>
                                <span class="tier-card__period">/month</span>
                            </div>
                            <div class="tier-card__billing">Best value &mdash; P6 per listing</div>
                            <ul class="tier-card__features">
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> 10 active listings</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> 90-day listing duration</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> Priority support</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> Featured badge on listings</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> Edit listings anytime</li>
                            </ul>
                            <div class="tier-card__cta">
                                <button class="btn btn--primary btn--full" onclick="initiatePurchase('standard')" id="tierBtnStandard">
                                    Upgrade to Standard
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Premium Tier -->
                    <div class="tier-card reveal">
                        <div class="tier-card__inner">
                            <div class="tier-card__icon tier-card__icon--premium"><i class="bi bi-gem"></i></div>
                            <div class="tier-card__name">Premium</div>
                            <div class="tier-card__desc">For dealerships &amp; power sellers</div>
                            <div class="tier-card__price">
                                <span class="tier-card__amount">P100</span>
                                <span class="tier-card__period">/month</span>
                            </div>
                            <div class="tier-card__billing">Unlimited everything</div>
                            <ul class="tier-card__features">
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> Unlimited active listings</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> 90-day listing duration</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> Top placement in search</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> Verified seller badge</li>
                                <li class="tier-card__feature"><i class="bi bi-check-circle-fill"></i> 24/7 dedicated support</li>
                            </ul>
                            <div class="tier-card__cta">
                                <button class="btn btn--secondary btn--full" onclick="initiatePurchase('premium')" id="tierBtnPremium">
                                    Upgrade to Premium
                                </button>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Trust signals -->
                <div class="paywall__guarantee">
                    <div class="paywall__guarantee-item"><i class="bi bi-shield-check"></i> Secure mobile money payments</div>
                    <div class="paywall__guarantee-item"><i class="bi bi-arrow-repeat"></i> Cancel or downgrade anytime</div>
                    <div class="paywall__guarantee-item"><i class="bi bi-headset"></i> WhatsApp support included</div>
                </div>

                <!-- Payment method info -->
                <div style="text-align: center; margin-top: 32px;">
                    <p class="body-sm" style="margin-bottom: 8px;">Accepted payment methods:</p>
                    <div class="pay-methods" id="payMethods">
                        <div class="pay-method active" data-method="orange_money" onclick="selectPayMethod(this)">
                            <i class="bi bi-phone"></i> Orange Money
                        </div>
                        <div class="pay-method" data-method="myzaka" onclick="selectPayMethod(this)">
                            <i class="bi bi-phone"></i> MyZaka
                        </div>
                        <div class="pay-method" data-method="manual" onclick="selectPayMethod(this)">
                            <i class="bi bi-chat-dots"></i> WhatsApp Transfer
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Admin Section (hidden unless admin) -->
        <section class="admin" id="adminSection" style="display: none;">
            <div class="container">
                <div class="admin__header">
                    <div>
                        <div class="label" style="margin-bottom: 8px;"><i class="bi bi-shield-lock-fill"></i> Admin Panel</div>
                        <h2 class="heading-lg">Payment Management</h2>
                    </div>
                    <button class="btn btn--secondary btn--sm" onclick="loadAdminData()">
                        <i class="bi bi-arrow-clockwise"></i> Refresh
                    </button>
                </div>

                <div class="admin__stats" id="adminStats">
                    <div class="admin__stat-card">
                        <div class="admin__stat-label">Pending Payments</div>
                        <div class="admin__stat-value" id="statPending">0</div>
                    </div>
                    <div class="admin__stat-card">
                        <div class="admin__stat-label">Awaiting Verification</div>
                        <div class="admin__stat-value" id="statAwaiting">0</div>
                    </div>
                    <div class="admin__stat-card">
                        <div class="admin__stat-label">Completed Today</div>
                        <div class="admin__stat-value" id="statCompleted">0</div>
                    </div>
                    <div class="admin__stat-card">
                        <div class="admin__stat-label">Revenue (Pula)</div>
                        <div class="admin__stat-value" id="statRevenue">P0</div>
                    </div>
                </div>

                <!-- Pending payments table -->
                <div class="admin__section">
                    <div class="admin__section-header">
                        <div class="admin__section-title">Pending & Awaiting Payments</div>
                    </div>
                    <div id="pendingTableWrap">
                        <table class="admin__table">
                            <thead>
                                <tr>
                                    <th>Reference</th>
                                    <th>User</th>
                                    <th>Tier</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pendingTableBody">
                                <tr><td colspan="8" class="admin__no-data">No pending payments</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Recent transactions -->
                <div class="admin__section">
                    <div class="admin__section-header">
                        <div class="admin__section-title">Recent Transactions</div>
                    </div>
                    <div id="recentTableWrap">
                        <table class="admin__table">
                            <thead>
                                <tr>
                                    <th>Reference</th>
                                    <th>Tier</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="recentTableBody">
                                <tr><td colspan="6" class="admin__no-data">No transactions yet</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </section>
    </div>


    <!-- ===== FOOTER ===== -->
    <footer class="footer">
        <div class="container footer__inner">
            <div class="footer__logo">
                PrimeDrive<span class="nav__logo-dot"></span>
            </div>
            <ul class="footer__links">
                <li><a class="footer__link" onclick="navigate('home')">Home</a></li>
                <li><a class="footer__link" onclick="navigate('buy')">Buy</a></li>
                <li><a class="footer__link" onclick="navigate('rent')">Rent</a></li>
                <li><a class="footer__link" onclick="navigate('sell')">Sell</a></li>
                <li><a class="footer__link" onclick="navigate('about')">About</a></li>
                <li><a class="footer__link" onclick="navigate('contact')">Contact</a></li>
            </ul>
            <div class="footer__copy">&copy; 2026 PrimeDrive Botswana. All rights reserved.</div>
        </div>
    </footer>

    <!-- WhatsApp Float -->
    <div class="wa-float">
        <a href="https://wa.me/26777625997" target="_blank" class="wa-float__btn" title="Chat on WhatsApp">
            <i class="bi bi-whatsapp"></i>
        </a>
    </div>


    <!-- ========================================
         JAVASCRIPT
         ======================================== -->
    <script>
    /* ===========================================
       DATA — EDIT LISTINGS HERE
       =========================================== */
    const WHATSAPP = "26777625997";

    // Backend API base URL (change for production)
    const API_BASE = "http://localhost:8000";

    // Auth state
    let authToken = localStorage.getItem('pd-token') || null;
    let currentUser = null;
    let selectedPayMethod = 'orange_money';
    let isAdmin = false;

    // Car images from Unsplash (free to use)
    const carImages = {
        hilux:      "https://images.unsplash.com/photo-1625231334401-4abc27174831?w=480&q=75",
        bmw3:       "https://images.unsplash.com/photo-1555215695-3004980ad54e?w=480&q=75",
        mercedesC:  "https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?w=480&q=75",
        ranger:     "https://images.unsplash.com/photo-1612825173281-9a193378527e?w=480&q=75",
        polo:       "https://images.unsplash.com/photo-1606611013016-969c19ba523c?w=480&q=75",
        tucson:     "https://images.unsplash.com/photo-1633695410777-d06cd4638edf?w=480&q=75",
        fortuner:   "https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?w=480&q=75",
        np200:      "https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=480&q=75",
        fit:        "https://images.unsplash.com/photo-1609521263047-f8f205293f24?w=480&q=75",
        corolla:    "https://images.unsplash.com/photo-1623869675781-80aa31012a5a?w=480&q=75",
        xtrail:     "https://images.unsplash.com/photo-1549317661-bd32c8ce0afe?w=480&q=75",
        swift:      "https://images.unsplash.com/photo-1541899481282-d53bffe3c35d?w=480&q=75",
        rental1:    "https://images.unsplash.com/photo-1590362891991-f776e747a588?w=480&q=75",
        rental2:    "https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=480&q=75",
        rental3:    "https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=480&q=75",
        rental4:    "https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=480&q=75",
        rental5:    "https://images.unsplash.com/photo-1502877338535-766e1452684a?w=480&q=75",
        rental6:    "https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=480&q=75",
    };

    const carListings = [
        // Real car listings will be added here as inventory becomes available
        // Contact us on WhatsApp to check current stock
    ];

    const rentalListings = [
        // Rental vehicles will be listed here as they become available
        // Contact us to inquire about rental options
    ];


    /* ===========================================
       NAVIGATION
       =========================================== */
    function navigate(page) {
        // Hide all pages
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('page-' + page).classList.add('active');

        // Update nav active states
        document.querySelectorAll('[data-nav]').forEach(el => {
            el.classList.toggle('active', el.dataset.nav === page);
        });

        window.scrollTo({ top: 0, behavior: 'smooth' });

        // Re-init scroll reveals
        requestAnimationFrame(initRevealObserver);
    }

    function toggleMobileNav() {
        const hamburger = document.getElementById('hamburger');
        const mobileNav = document.getElementById('mobileNav');
        hamburger.classList.toggle('active');
        mobileNav.classList.toggle('active');
        document.body.style.overflow = mobileNav.classList.contains('active') ? 'hidden' : '';
    }

    // Scroll listener for nav
    window.addEventListener('scroll', () => {
        document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 10);
    });

    // Show/hide desktop WhatsApp button based on width
    function checkNavWa() {
        const btn = document.getElementById('navWaBtn');
        if (btn) btn.style.display = window.innerWidth >= 1100 ? 'inline-flex' : 'none';
    }
    window.addEventListener('resize', checkNavWa);


    /* ===========================================
       THEME
       =========================================== */
    function toggleTheme() {
        const html = document.documentElement;
        const isDark = html.getAttribute('data-theme') === 'dark';
        html.setAttribute('data-theme', isDark ? 'light' : 'dark');
        document.getElementById('themeIcon').className = isDark ? 'bi bi-moon' : 'bi bi-sun';
        localStorage.setItem('pd-theme', isDark ? 'light' : 'dark');
    }

    function loadTheme() {
        const saved = localStorage.getItem('pd-theme');
        if (saved === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            document.getElementById('themeIcon').className = 'bi bi-sun';
        }
    }


    /* ===========================================
       RENDERING HELPERS
       =========================================== */
    function formatPrice(p) {
        return 'P ' + p.toLocaleString('en-BW');
    }

    function buildSaleCard(car) {
        return `
        <div class="car-card reveal">
            <div class="car-card__image">
                <img src="${car.image}" alt="${car.brand} ${car.model}" loading="lazy">
                ${car.badge ? `<div class="car-card__badge car-card__badge--accent"><i class="bi bi-star-fill"></i> ${car.badge}</div>` : ''}
                <div class="car-card__type-badge car-card__type-badge--sale">For Sale</div>
            </div>
            <div class="car-card__body">
                <div class="car-card__name">${car.brand} ${car.model}</div>
                <div class="car-card__specs">
                    <span class="car-card__spec"><i class="bi bi-calendar3"></i> ${car.year}</span>
                    <span class="car-card__spec"><i class="bi bi-speedometer2"></i> ${car.mileage.toLocaleString()} km</span>
                    <span class="car-card__spec"><i class="bi bi-gear"></i> ${car.transmission}</span>
                    <span class="car-card__spec"><i class="bi bi-patch-check"></i> ${car.condition}</span>
                </div>
                <div class="car-card__divider"></div>
                <div class="car-card__footer">
                    <div>
                        <div class="car-card__price">${formatPrice(car.price)}</div>
                    </div>
                    <div class="car-card__location"><i class="bi bi-geo-alt"></i> ${car.location}</div>
                </div>
            </div>
            <div class="car-card__cta">
                <a href="https://wa.me/${WHATSAPP}?text=${encodeURIComponent(`Hi PrimeDrive! I'm interested in the ${car.brand} ${car.model} (${car.year}) listed at ${formatPrice(car.price)}. Is it still available?`)}" target="_blank" class="btn btn--whatsapp btn--sm btn--full">
                    <i class="bi bi-whatsapp"></i> Chat on WhatsApp
                </a>
            </div>
        </div>`;
    }

    function buildRentalCard(car) {
        return `
        <div class="car-card reveal">
            <div class="car-card__image">
                <img src="${car.image}" alt="${car.brand} ${car.model}" loading="lazy">
                ${car.badge ? `<div class="car-card__badge car-card__badge--accent"><i class="bi bi-star-fill"></i> ${car.badge}</div>` : ''}
                <div class="car-card__type-badge car-card__type-badge--rent">For Rent</div>
            </div>
            <div class="car-card__body">
                <div class="car-card__name">${car.brand} ${car.model}</div>
                <div class="car-card__specs">
                    <span class="car-card__spec"><i class="bi bi-calendar3"></i> ${car.year}</span>
                    <span class="car-card__spec"><i class="bi bi-people"></i> ${car.seats} seats</span>
                    <span class="car-card__spec"><i class="bi bi-gear"></i> ${car.transmission}</span>
                </div>
                <div class="car-card__divider"></div>
                <div class="car-card__footer">
                    <div>
                        <div class="car-card__price">${formatPrice(car.dailyRate)} <span class="car-card__price-sub">/ day</span></div>
                    </div>
                    <div class="car-card__location"><i class="bi bi-geo-alt"></i> ${car.location}</div>
                </div>
            </div>
            <div class="car-card__cta">
                <a href="https://wa.me/${WHATSAPP}?text=${encodeURIComponent(`Hi PrimeDrive! I'd like to book the ${car.brand} ${car.model} (${car.year}) at ${formatPrice(car.dailyRate)}/day. What dates are available?`)}" target="_blank" class="btn btn--whatsapp btn--sm btn--full">
                    <i class="bi bi-whatsapp"></i> Book on WhatsApp
                </a>
            </div>
        </div>`;
    }

    function noResultsHTML() {
        return `<div class="no-results">
            <div class="no-results__icon"><i class="bi bi-car-front"></i></div>
            <div class="no-results__title">No current listings available</div>
            <p class="body-sm">We're actively sourcing quality vehicles in Botswana. Contact us on WhatsApp to discuss your requirements.</p>
            <div style="margin-top:20px;">
                <a href="https://wa.me/${WHATSAPP}" target="_blank" class="btn btn--whatsapp">
                    <i class="bi bi-whatsapp"></i> Chat on WhatsApp
                </a>
            </div>
        </div>`;
    }


    /* ===========================================
       BUY SECTION
       =========================================== */
    function populateBuyFilters() {
        const brands = [...new Set(carListings.map(c => c.brand))].sort();
        const years = [...new Set(carListings.map(c => c.year))].sort((a, b) => b - a);
        const locations = [...new Set(carListings.map(c => c.location))].sort();

        appendOptions('buyFilterBrand', brands);
        appendOptions('buyFilterYear', years);
        appendOptions('buyFilterLocation', locations);
    }

    function renderBuyCars(cars) {
        const grid = document.getElementById('buyGrid');
        document.getElementById('buyCount').textContent = `Showing ${cars.length} car${cars.length !== 1 ? 's' : ''}`;
        grid.innerHTML = cars.length ? cars.map(buildSaleCard).join('') : noResultsHTML();
        initRevealObserver();
    }

    function applyBuyFilters() {
        let filtered = [...carListings];
        const brand = val('buyFilterBrand');
        const price = val('buyFilterPrice');
        const year = val('buyFilterYear');
        const trans = val('buyFilterTrans');
        const loc = val('buyFilterLocation');

        if (brand) filtered = filtered.filter(c => c.brand === brand);
        if (year) filtered = filtered.filter(c => c.year == year);
        if (trans) filtered = filtered.filter(c => c.transmission === trans);
        if (loc) filtered = filtered.filter(c => c.location === loc);
        if (price) {
            const [min, max] = price.split('-').map(Number);
            filtered = filtered.filter(c => c.price >= min && c.price <= max);
        }
        renderBuyCars(filtered);
    }

    function resetBuyFilters() {
        ['buyFilterBrand','buyFilterPrice','buyFilterYear','buyFilterTrans','buyFilterLocation'].forEach(id => {
            document.getElementById(id).value = '';
        });
        renderBuyCars(carListings);
    }


    /* ===========================================
       RENT SECTION
       =========================================== */
    function populateRentFilters() {
        const brands = [...new Set(rentalListings.map(c => c.brand))].sort();
        const years = [...new Set(rentalListings.map(c => c.year))].sort((a, b) => b - a);
        const locations = [...new Set(rentalListings.map(c => c.location))].sort();

        appendOptions('rentFilterBrand', brands);
        appendOptions('rentFilterYear', years);
        appendOptions('rentFilterLocation', locations);
    }

    function renderRentCars(cars) {
        const grid = document.getElementById('rentGrid');
        document.getElementById('rentCount').textContent = `Showing ${cars.length} car${cars.length !== 1 ? 's' : ''}`;
        grid.innerHTML = cars.length ? cars.map(buildRentalCard).join('') : noResultsHTML();
        initRevealObserver();
    }

    function applyRentFilters() {
        let filtered = [...rentalListings];
        const brand = val('rentFilterBrand');
        const price = val('rentFilterPrice');
        const year = val('rentFilterYear');
        const trans = val('rentFilterTrans');
        const loc = val('rentFilterLocation');

        if (brand) filtered = filtered.filter(c => c.brand === brand);
        if (year) filtered = filtered.filter(c => c.year == year);
        if (trans) filtered = filtered.filter(c => c.transmission === trans);
        if (loc) filtered = filtered.filter(c => c.location === loc);
        if (price) {
            const [min, max] = price.split('-').map(Number);
            filtered = filtered.filter(c => c.dailyRate >= min && c.dailyRate <= max);
        }
        renderRentCars(filtered);
    }

    function resetRentFilters() {
        ['rentFilterBrand','rentFilterPrice','rentFilterYear','rentFilterTrans','rentFilterLocation'].forEach(id => {
            document.getElementById(id).value = '';
        });
        renderRentCars(rentalListings);
    }


    /* ===========================================
       SELL FORM
       =========================================== */
    let uploadedPhotos = [];

    function handlePhotos(e) {
        const files = Array.from(e.target.files).slice(0, 6 - uploadedPhotos.length);
        files.forEach(file => {
            const reader = new FileReader();
            reader.onload = ev => {
                uploadedPhotos.push({ name: file.name, data: ev.target.result });
                renderPreviews();
            };
            reader.readAsDataURL(file);
        });
        e.target.value = '';
    }

    function renderPreviews() {
        document.getElementById('photoPreviews').innerHTML = uploadedPhotos.map((p, i) => `
            <div class="upload-preview">
                <img src="${p.data}" alt="Photo ${i + 1}">
                <div class="upload-preview__remove" onclick="removePhoto(${i})"><i class="bi bi-x"></i></div>
            </div>
        `).join('');
    }

    function removePhoto(i) {
        uploadedPhotos.splice(i, 1);
        renderPreviews();
    }

    function submitSellForm(e) {
        e.preventDefault();
        const d = {
            brand: val('sellBrand'), model: val('sellModel'),
            year: val('sellYear'), mileage: val('sellMileage'),
            transmission: val('sellTransmission'), condition: val('sellCondition'),
            price: val('sellPrice'), location: val('sellLocation'),
            name: val('sellName'), notes: val('sellNotes')
        };
        const msg = `*CAR FOR SALE — PrimeDrive*\n\n` +
            `Seller: ${d.name}\n` +
            `Car: ${d.brand} ${d.model}\n` +
            `Year: ${d.year}\n` +
            `Mileage: ${Number(d.mileage).toLocaleString()} km\n` +
            `Transmission: ${d.transmission}\n` +
            `Condition: ${d.condition}\n` +
            `Price: P ${Number(d.price).toLocaleString()}\n` +
            `Location: ${d.location}\n` +
            (d.notes ? `Notes: ${d.notes}\n` : '') +
            `\nPhotos: ${uploadedPhotos.length} (will send separately)`;
        window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`, '_blank');
    }


    /* ===========================================
       SOURCING FORM
       =========================================== */
    function submitSourcingForm(e) {
        e.preventDefault();
        const d = {
            brand: val('srcBrand'), model: val('srcModel'),
            year: val('srcYear'), budget: val('srcBudget'),
            name: val('srcName'), notes: val('srcNotes')
        };
        const msg = `*CAR SOURCING REQUEST — PrimeDrive*\n\n` +
            `Name: ${d.name}\n` +
            `Looking for: ${d.brand} ${d.model}\n` +
            `Year Range: ${d.year}\n` +
            `Budget: P ${d.budget}\n` +
            (d.notes ? `Preferences: ${d.notes}\n` : '') +
            `\nPlease help me find this car!`;
        window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`, '_blank');
    }


    /* ===========================================
       UTILITIES
       =========================================== */
    function val(id) { return document.getElementById(id).value; }

    function appendOptions(selectId, items) {
        const sel = document.getElementById(selectId);
        items.forEach(item => {
            const opt = document.createElement('option');
            opt.value = item;
            opt.textContent = item;
            sel.appendChild(opt);
        });
    }


    /* ===========================================
       SCROLL REVEAL
       =========================================== */
    let revealObserver;
    function initRevealObserver() {
        if (revealObserver) revealObserver.disconnect();
        revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    revealObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.08, rootMargin: '0px 0px -30px 0px' });

        document.querySelectorAll('.reveal:not(.visible)').forEach(el => revealObserver.observe(el));
    }


    /* ===========================================
       API HELPER
       =========================================== */
    async function apiCall(method, path, body = null) {
        const headers = { 'Content-Type': 'application/json' };
        if (authToken) headers['Authorization'] = `Bearer ${authToken}`;
        const opts = { method, headers };
        if (body) opts.body = JSON.stringify(body);
        const res = await fetch(`${API_BASE}${path}`, opts);
        const data = await res.json();
        if (!res.ok) {
            const msg = typeof data.detail === 'string' ? data.detail : (data.detail?.message || 'Something went wrong');
            throw new Error(msg);
        }
        return data;
    }


    /* ===========================================
       LOGIN / SIGNUP
       =========================================== */
    function showLogin() {
        document.getElementById('loginOverlay').classList.add('active');
        document.getElementById('loginEmail').focus();
        document.body.style.overflow = 'hidden';
    }

    function hideLogin() {
        document.getElementById('loginOverlay').classList.remove('active');
        document.body.style.overflow = '';
        clearLoginError();
    }

    function clearLoginError() {
        const el = document.getElementById('loginError');
        el.classList.remove('show');
        el.textContent = '';
    }

    function showLoginError(msg) {
        const el = document.getElementById('loginError');
        el.textContent = msg;
        el.classList.add('show');
    }

    function togglePasswordVis() {
        const inp = document.getElementById('loginPassword');
        const icon = document.getElementById('passEyeIcon');
        if (inp.type === 'password') {
            inp.type = 'text';
            icon.className = 'bi bi-eye-slash';
        } else {
            inp.type = 'password';
            icon.className = 'bi bi-eye';
        }
    }

    let showingSignup = false;
    function switchToSignup() {
        showingSignup = !showingSignup;
        document.getElementById('loginForm').style.display = showingSignup ? 'none' : '';
        document.getElementById('signupForm').style.display = showingSignup ? '' : 'none';
        document.getElementById('loginSignupSwitch').style.display = showingSignup ? 'none' : '';
        document.getElementById('loginAltText').innerHTML = showingSignup
            ? 'Already have an account? <a onclick="switchToSignup()">Sign in</a>'
            : 'Admin testing? Use your Supabase credentials.';
        clearLoginError();
    }

    async function handleLogin(e) {
        e.preventDefault();
        clearLoginError();
        const btn = document.getElementById('loginSubmitBtn');
        btn.disabled = true;
        btn.innerHTML = '<i class="bi bi-arrow-repeat"></i> Signing in...';

        try {
            const data = await apiCall('POST', '/auth/login', {
                email: document.getElementById('loginEmail').value,
                password: document.getElementById('loginPassword').value,
            });
            authToken = data.access_token;
            localStorage.setItem('pd-token', authToken);
            currentUser = data.user;
            onLoginSuccess();
            hideLogin();
        } catch (err) {
            showLoginError(err.message || 'Invalid credentials');
        } finally {
            btn.disabled = false;
            btn.innerHTML = '<i class="bi bi-arrow-right"></i> Sign In';
        }
    }

    async function handleSignup(e) {
        e.preventDefault();
        clearLoginError();
        const btn = document.getElementById('signupSubmitBtn');
        btn.disabled = true;
        btn.innerHTML = '<i class="bi bi-arrow-repeat"></i> Creating account...';

        try {
            const data = await apiCall('POST', '/auth/signup', {
                email: document.getElementById('signupEmail').value,
                password: document.getElementById('signupPassword').value,
                phone: document.getElementById('signupPhone').value || null,
                whatsapp: document.getElementById('signupWhatsApp').value || null,
            });
            authToken = data.access_token;
            localStorage.setItem('pd-token', authToken);
            currentUser = data.user;
            onLoginSuccess();
            hideLogin();
        } catch (err) {
            showLoginError(err.message || 'Could not create account');
        } finally {
            btn.disabled = false;
            btn.innerHTML = '<i class="bi bi-check-lg"></i> Create Account';
        }
    }

    function onLoginSuccess() {
        // Update nav
        document.getElementById('navLoginBtn').style.display = 'none';
        document.getElementById('navUserBtn').style.display = '';
        document.getElementById('mobileLoginBtn').style.display = 'none';
        document.getElementById('mobileDashBtn').style.display = '';

        // Update user bar
        if (currentUser) {
            document.getElementById('userBar').style.display = '';
            document.getElementById('userAvatar').textContent = (currentUser.email || 'U')[0].toUpperCase();
            document.getElementById('userDisplayName').textContent = currentUser.email;
            updateTierDisplay();
        }

        // Navigate to dashboard
        navigate('dashboard');
        loadSubscriptionStatus();

        // Check if admin (for now, any logged-in user sees admin panel since this is admin testing)
        isAdmin = true;
        if (isAdmin) {
            document.getElementById('adminSection').style.display = '';
            loadAdminData();
        }
    }

    function handleLogout() {
        authToken = null;
        currentUser = null;
        isAdmin = false;
        localStorage.removeItem('pd-token');

        document.getElementById('navLoginBtn').style.display = '';
        document.getElementById('navUserBtn').style.display = 'none';
        document.getElementById('mobileLoginBtn').style.display = '';
        document.getElementById('mobileDashBtn').style.display = 'none';
        document.getElementById('userBar').style.display = 'none';
        document.getElementById('adminSection').style.display = 'none';

        navigate('home');
    }

    async function restoreSession() {
        if (!authToken) return;
        try {
            currentUser = await apiCall('GET', '/auth/me');
            onLoginSuccess();
        } catch {
            // Token expired
            authToken = null;
            localStorage.removeItem('pd-token');
        }
    }


    /* ===========================================
       SUBSCRIPTION / PAYWALL
       =========================================== */
    function updateTierDisplay() {
        if (!currentUser) return;
        const limit = currentUser.listing_limit === null ? '∞' : currentUser.listing_limit;
        document.getElementById('userTierDisplay').textContent =
            `${capitalize(currentUser.current_tier)} Tier · ${currentUser.listing_count}/${limit} Listings`;

        // Update tier buttons
        const tiers = ['free', 'basic', 'standard', 'premium'];
        const tierOrder = { free: 0, basic: 1, standard: 2, premium: 3 };
        const currentIdx = tierOrder[currentUser.current_tier] || 0;

        tiers.forEach(tier => {
            const btn = document.getElementById('tierBtn' + capitalize(tier));
            if (!btn) return;
            if (tier === currentUser.current_tier) {
                btn.outerHTML = `<div class="tier-card__current" id="tierBtn${capitalize(tier)}"><i class="bi bi-check2"></i> Current Plan</div>`;
            } else if (tierOrder[tier] < currentIdx) {
                // Downgrade - keep button but show it differently
                btn.outerHTML = `<button class="btn btn--ghost btn--full" id="tierBtn${capitalize(tier)}" disabled style="opacity:0.5;">Included</button>`;
            }
        });
    }

    async function loadSubscriptionStatus() {
        if (!authToken) return;
        try {
            const status = await apiCall('GET', '/subscriptions/status');
            // Update current user with latest info
            currentUser.current_tier = status.current_tier;
            currentUser.listing_count = status.listing_count;
            currentUser.listing_limit = status.listing_limit;
            updateTierDisplay();
        } catch (err) {
            console.log('Could not load subscription status:', err.message);
        }
    }

    function selectPayMethod(el) {
        document.querySelectorAll('.pay-method').forEach(e => e.classList.remove('active'));
        el.classList.add('active');
        selectedPayMethod = el.dataset.method;
    }

    async function initiatePurchase(tier) {
        if (!authToken) {
            showLogin();
            return;
        }

        const btn = document.getElementById('tierBtn' + capitalize(tier));
        if (!btn || btn.disabled) return;
        const origText = btn.textContent;
        btn.disabled = true;
        btn.textContent = 'Processing...';

        try {
            const result = await apiCall('POST', '/subscriptions/initiate', {
                tier: tier,
                payment_method: selectedPayMethod,
            });

            if (result.payment_url) {
                // Orange Money redirect
                window.open(result.payment_url, '_blank');
                alert(`Payment initiated!\n\n${result.message}\n\nTransaction ID: ${result.transaction_id}\n\nAfter payment, your subscription will activate automatically.`);
            } else {
                // Manual / MyZaka
                const ref = result.transaction_id.slice(0, 8).toUpperCase();
                alert(`${result.message}\n\nTransaction Reference: PD-${ref}\n\nAfter sending payment, come back and we'll verify it.`);
            }

            // Poll for status
            if (result.transaction_id) {
                pollPaymentStatus(result.transaction_id);
            }
        } catch (err) {
            alert('Payment error: ' + err.message);
        } finally {
            btn.disabled = false;
            btn.textContent = origText;
        }
    }

    async function pollPaymentStatus(txnId, attempts = 0) {
        if (attempts > 30) return; // stop after 5 minutes
        try {
            const status = await apiCall('GET', `/subscriptions/check-payment/${txnId}`);
            if (status.status === 'completed') {
                alert(`Payment confirmed! Your ${status.tier_name} tier is now active.`);
                await loadSubscriptionStatus();
                return;
            }
            if (status.status === 'failed') return;
        } catch {}
        // Keep polling
        setTimeout(() => pollPaymentStatus(txnId, attempts + 1), 10000);
    }


    /* ===========================================
       ADMIN DASHBOARD
       =========================================== */
    async function loadAdminData() {
        if (!authToken || !isAdmin) return;

        try {
            // Load pending payments
            const pending = await apiCall('GET', '/admin/payments/pending');
            renderPendingTable(pending);

            // Load transaction history
            const transactions = await apiCall('GET', '/subscriptions/transactions');
            renderRecentTable(transactions);

            // Update stats
            const pendingCount = pending.filter(t => t.status === 'pending').length;
            const awaitingCount = pending.filter(t => t.status === 'awaiting_verification').length;
            const today = new Date().toISOString().split('T')[0];
            const completedToday = transactions.filter(t =>
                t.status === 'completed' && t.completed_at && t.completed_at.startsWith(today)
            ).length;
            const totalRevenue = transactions
                .filter(t => t.status === 'completed')
                .reduce((sum, t) => sum + t.amount_pula, 0);

            document.getElementById('statPending').textContent = pendingCount;
            document.getElementById('statAwaiting').textContent = awaitingCount;
            document.getElementById('statCompleted').textContent = completedToday;
            document.getElementById('statRevenue').textContent = 'P' + totalRevenue.toLocaleString();
        } catch (err) {
            console.error('Admin data load error:', err);
        }
    }

    function renderPendingTable(payments) {
        const tbody = document.getElementById('pendingTableBody');
        if (!payments.length) {
            tbody.innerHTML = '<tr><td colspan="8" class="admin__no-data">No pending payments — all clear!</td></tr>';
            return;
        }
        tbody.innerHTML = payments.map(p => `
            <tr>
                <td><code style="font-size:0.8rem;">${p.transaction_reference || '—'}</code></td>
                <td>${p.id.slice(0, 8)}...</td>
                <td>${capitalize(p.tier_name || '—')}</td>
                <td><strong>P${p.amount_pula}</strong></td>
                <td>${formatMethod(p.payment_method)}</td>
                <td>${statusBadge(p.status)}</td>
                <td>${formatDate(p.created_at)}</td>
                <td>
                    <div class="admin__actions">
                        <button class="admin__btn admin__btn--approve" onclick="adminApprove('${p.id}')">
                            <i class="bi bi-check-lg"></i> Approve
                        </button>
                        <button class="admin__btn admin__btn--reject" onclick="adminReject('${p.id}')">
                            <i class="bi bi-x-lg"></i> Reject
                        </button>
                    </div>
                </td>
            </tr>
        `).join('');
    }

    function renderRecentTable(transactions) {
        const tbody = document.getElementById('recentTableBody');
        if (!transactions.length) {
            tbody.innerHTML = '<tr><td colspan="6" class="admin__no-data">No transactions yet</td></tr>';
            return;
        }
        tbody.innerHTML = transactions.slice(0, 20).map(t => `
            <tr>
                <td><code style="font-size:0.8rem;">${t.transaction_reference || '—'}</code></td>
                <td>${capitalize(t.tier_name || '—')}</td>
                <td><strong>P${t.amount_pula}</strong></td>
                <td>${formatMethod(t.payment_method)}</td>
                <td>${statusBadge(t.status)}</td>
                <td>${formatDate(t.created_at)}</td>
            </tr>
        `).join('');
    }

    async function adminApprove(txnId) {
        if (!confirm('Approve this payment and activate the subscription?')) return;
        try {
            await apiCall('POST', '/admin/payments/approve', {
                transaction_id: txnId,
                admin_notes: 'Manually approved via dashboard',
            });
            alert('Payment approved and subscription activated!');
            await loadAdminData();
            await loadSubscriptionStatus();
        } catch (err) {
            alert('Error: ' + err.message);
        }
    }

    async function adminReject(txnId) {
        const reason = prompt('Rejection reason (optional):');
        if (reason === null) return; // cancelled
        try {
            await apiCall('POST', '/admin/payments/reject', {
                transaction_id: txnId,
                admin_notes: reason || 'Rejected via dashboard',
            });
            alert('Payment rejected.');
            await loadAdminData();
        } catch (err) {
            alert('Error: ' + err.message);
        }
    }


    /* ===========================================
       FORMATTING HELPERS
       =========================================== */
    function capitalize(s) { return s ? s.charAt(0).toUpperCase() + s.slice(1) : ''; }

    function formatMethod(m) {
        const methods = { orange_money: 'Orange Money', myzaka: 'MyZaka', manual: 'Manual' };
        return methods[m] || m;
    }

    function formatDate(iso) {
        if (!iso) return '—';
        return new Date(iso).toLocaleDateString('en-BW', { day: 'numeric', month: 'short', year: 'numeric' });
    }

    function statusBadge(s) {
        const map = {
            pending: 'pending',
            awaiting_verification: 'awaiting',
            completed: 'completed',
            failed: 'failed',
            refunded: 'failed',
        };
        const cls = map[s] || 'pending';
        const label = s === 'awaiting_verification' ? 'Awaiting' : capitalize(s);
        return `<span class="admin__badge admin__badge--${cls}">${label}</span>`;
    }


    /* ===========================================
       INIT
       =========================================== */
    document.addEventListener('DOMContentLoaded', () => {
        loadTheme();
        checkNavWa();
        populateBuyFilters();
        populateRentFilters();
        renderBuyCars(carListings);
        renderRentCars(rentalListings);
        initRevealObserver();
        restoreSession();

        // Close login on overlay click
        document.getElementById('loginOverlay').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) hideLogin();
        });

        // Close login on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') hideLogin();
        });
    });
    </script>
</body>
</html>